{"ast":null,"code":"import _defineProperty from\"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Grid from\"@material-ui/core/Grid\";import Chip from\"@material-ui/core/Chip\";import Avatar from\"@material-ui/core/Avatar\";import AvatarGroup from\"@material-ui/lab/AvatarGroup\";import Tooltip from\"@material-ui/core/Tooltip\";import{NavLink}from\"react-router-dom\";import{useMutation}from\"@apollo/react-hooks\";import{ALL_EVENTS,CANCELLING_BOOKING}from\"../../Services/GQL\";function ConfirmedGuest(_ref){var event=_ref.event,bookings=_ref.bookings,GQL_refetch=_ref.GQL_refetch,refetchVariables=_ref.refetchVariables;var classes=useStyles();var _useMutation=useMutation(CANCELLING_BOOKING),_useMutation2=_slicedToArray(_useMutation,2),cancellingMutation=_useMutation2[0],cancellingState=_useMutation2[1];var countGuests=0;var overFlowGst=false;var leftoverGst=[];console.log(\"ConfirmedGuest, bookings: \",bookings);return React.createElement(Grid,{container:true,justify:\"flex-start\",alignItems:\"center\",direction:\"row\",className:classes.mainContainer},event&&event.areYouAuthor?//\nReact.createElement(React.Fragment,null,bookings&&bookings.map(function(booking,index){return booking.confirmed&&!booking.cancelled&&React.createElement(Grid,{item:true,key:index},cancellingState&&cancellingState.loading&&React.createElement(Chip,{className:classes.chip,avatar:React.createElement(Avatar,{alt:booking.user.name,src:booking.user.picture},\"M\"),label:\"Deleting...\",color:\"primary\",variant:\"outlined\",disabled:true}),cancellingState&&!cancellingState.loading&&React.createElement(Chip,{className:classes.chip,avatar:React.createElement(Avatar,{alt:booking.user.name,src:booking.user.picture},\"M\"),label:booking.user.name,color:\"primary\",variant:\"outlined\",onClick:function onClick(){return console.log(\"XX\");},onDelete:function onDelete(){cancellingMutation({variables:{user_id:booking.user._id,event_id:event._id},refetchQueries:function refetchQueries(){return[{query:GQL_refetch,variables:_objectSpread({id:event._id},refetchVariables)},{query:ALL_EVENTS,variables:{date:new Date(event.dateStart).toISOString().split(\"T\")[0]}}];}});}}),cancellingState&&!cancellingState.loading&&event&&!event.areYouAuthor&&React.createElement(Chip,{className:classes.chip,avatar:React.createElement(Avatar,{alt:booking.user.name,src:booking.user.picture},\"User\"),label:booking.user.name,color:\"primary\",variant:\"outlined\",onClick:function onClick(){return console.log(\"XX\");}}));})):React.createElement(Grid,{container:true},React.createElement(Grid,{item:true},React.createElement(AvatarGroup,null,bookings&&bookings.map(function(booking,index){if(booking.confirmed){countGuests++;if(index<=4){return React.createElement(NavLink,{to:\"/user/\".concat(booking.user._id),className:classes.noBorder,key:index},React.createElement(Avatar,{alt:\"Remy Sharp\",src:booking.user.picture}));}else{overFlowGst=true;leftoverGst.push(booking.user.name);}}else{return null;}}),overFlowGst&&React.createElement(Tooltip,{title:leftoverGst.map(function(name){return\"\".concat(name,\" \\u2022 \");})},React.createElement(Avatar,null,\"+\",countGuests-5))))));}var useStyles=makeStyles(function(theme){return{mainContainer:{paddingLeft:10},chip:{},noBorder:{border:\"0px solid black\"}};});export default ConfirmedGuest;","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/Charlie2.0/client/src/Molecules/event/ConfirmedGuest.js"],"names":["React","makeStyles","Grid","Chip","Avatar","AvatarGroup","Tooltip","NavLink","useMutation","ALL_EVENTS","CANCELLING_BOOKING","ConfirmedGuest","event","bookings","GQL_refetch","refetchVariables","classes","useStyles","cancellingMutation","cancellingState","countGuests","overFlowGst","leftoverGst","console","log","mainContainer","areYouAuthor","map","booking","index","confirmed","cancelled","loading","chip","user","name","picture","variables","user_id","_id","event_id","refetchQueries","query","id","date","Date","dateStart","toISOString","split","noBorder","push","theme","paddingLeft","border"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport Grid from \"@material-ui/core/Grid\";\nimport Chip from \"@material-ui/core/Chip\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport AvatarGroup from \"@material-ui/lab/AvatarGroup\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\n\nimport { NavLink } from \"react-router-dom\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { ALL_EVENTS, CANCELLING_BOOKING } from \"../../Services/GQL\";\n\n\nfunction ConfirmedGuest({event, bookings, GQL_refetch, refetchVariables}) {\n  const classes = useStyles();\n  const [cancellingMutation, cancellingState] = useMutation(CANCELLING_BOOKING);\n\n  let countGuests = 0;\n  let overFlowGst = false;\n  let leftoverGst = [];\n\n  console.log(\"ConfirmedGuest, bookings: \", bookings,);\n\n  return (\n    <Grid container justify=\"flex-start\" alignItems=\"center\" direction=\"row\" className={classes.mainContainer}>\n      {event && event.areYouAuthor ? ( //\n        <>\n          {bookings && bookings.map((booking, index) => \n            booking.confirmed && !booking.cancelled && <Grid item key={index}>\n                    {cancellingState && cancellingState.loading && (\n                      <Chip\n                        className={classes.chip}\n                        avatar={\n                          <Avatar\n                            alt={booking.user.name}\n                            src={booking.user.picture}\n                          >\n                            M\n                          </Avatar>\n                        }\n                        label=\"Deleting...\"\n                        color=\"primary\"\n                        variant=\"outlined\"\n                        disabled\n                      />\n                    )}\n                    {cancellingState && !cancellingState.loading && (\n                      <Chip\n                        className={classes.chip}\n                        avatar={\n                          <Avatar\n                            alt={booking.user.name}\n                            src={booking.user.picture}\n                          >\n                            M\n                          </Avatar>\n                        }\n                        label={booking.user.name}\n                        color=\"primary\"\n                        variant=\"outlined\"\n                        onClick={() => console.log(\"XX\")}\n                        onDelete={() => {\n                          cancellingMutation({\n                            variables: {\n                              user_id: booking.user._id,\n                              event_id: event._id\n                            },\n                            refetchQueries: () => [\n                              {\n                                query: GQL_refetch,\n                                variables: { id: event._id, ...refetchVariables }\n                              },\n                              {\n                                query: ALL_EVENTS,\n                                variables: {\n                                  date: new Date(event.dateStart)\n                                    .toISOString()\n                                    .split(\"T\")[0]\n                                }\n                              }\n                            ]\n                          });\n                        }}\n                      />\n                    )}\n                    {cancellingState && !cancellingState.loading && event &&\n                      !event.areYouAuthor && (\n                        <Chip\n                          className={classes.chip}\n                          avatar={\n                            <Avatar\n                              alt={booking.user.name}\n                              src={booking.user.picture}\n                            >\n                              User\n                            </Avatar>\n                          }\n                          label={booking.user.name}\n                          color=\"primary\"\n                          variant=\"outlined\"\n                          onClick={() => console.log(\"XX\")}\n                        />\n                      )}\n                  </Grid>\n   )}\n        </>\n      ) : (\n        <Grid container>\n          <Grid item>\n            <AvatarGroup>\n              {bookings && bookings.map((booking, index) => {\n                if (booking.confirmed) {\n                  countGuests++;\n                  if (index <= 4) {\n                    return (\n                      <NavLink\n                        to={`/user/${booking.user._id}`}\n                        className={classes.noBorder}\n                        key={index}\n                      >\n                        <Avatar alt=\"Remy Sharp\" src={booking.user.picture} />\n                      </NavLink>\n                    );\n                  } else {\n                    overFlowGst = true;\n                    leftoverGst.push(booking.user.name);\n                  }\n                } else {\n                  return null;\n                }\n              })}\n              {overFlowGst && (\n                <Tooltip title={leftoverGst.map(name => `${name} â€¢ `)}>\n                  <Avatar>+{countGuests - 5}</Avatar>\n                </Tooltip>\n              )}\n            </AvatarGroup>\n          </Grid>\n        </Grid>\n      )}\n    </Grid>\n  );\n}\n\nconst useStyles = makeStyles(theme => ({\n  mainContainer: {\n    paddingLeft: 10\n  },\n  chip: {},\n  noBorder: {\n    border: \"0px solid black\"\n  }\n}));\n\nexport default ConfirmedGuest;\n"]},"metadata":{},"sourceType":"module"}