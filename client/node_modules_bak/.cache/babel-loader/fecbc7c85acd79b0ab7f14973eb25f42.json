{"ast":null,"code":"import _slicedToArray from \"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/src/Atoms/Profile/AcceptBookingCard.js\";\nimport React, { useState, useRef, useContext, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport Badge from '@material-ui/core/Badge';\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { red } from \"@material-ui/core/colors\";\nimport countdown from \"countdown\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { useXsSize } from \"src/Hooks/useXsSize\";\nimport { UserContext } from \"src/userContext\";\nimport { PROFILE_DATA } from \"src/Services/GQL/PROFILE_DATA\";\nimport { SEEN_BOOKING } from \"src/Services/GQL/SEEN_BOOKING\";\nimport ListTopHalf from \"src/Atoms/Play/ListTopHalf\";\nimport PartyOn from \"src/Atoms/PartyOn\";\nimport BookingMessages from \"src/Atoms/BookingMessages\";\nimport BookingAcceptInput from \"src/Atoms/BookingAcceptInput\";\nimport EventButtons from \"src/Molecules/event/EventButtons\";\nexport default function AcceptBookingCard({\n  booking\n}) {\n  const classes = useStyles();\n\n  const _useXsSize = useXsSize(),\n        xs_size_memo = _useXsSize.xs_size_memo,\n        md_size_memo = _useXsSize.md_size_memo;\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        expanded = _useState2[0],\n        setExpanded = _useState2[1];\n\n  const _useContext = useContext(UserContext),\n        context = _useContext.context,\n        setContext = _useContext.setContext;\n\n  const _useMutation = useMutation(SEEN_BOOKING),\n        _useMutation2 = _slicedToArray(_useMutation, 2),\n        markBookingSeen = _useMutation2[0],\n        seenStates = _useMutation2[1];\n\n  useEffect(() => {// if(context.expanded_id === booking._id){\n    //   setExpanded(true)\n    // }else{\n    //   setExpanded(false)\n    // }\n  }, []);\n\n  const handleExpandClick = () => {\n    if (expanded) {\n      setExpanded(false);\n    } else {\n      setExpanded(true);\n    } // seenHostHandle()\n\n  };\n\n  const seenHostHandle = () => {\n    markBookingSeen({\n      variables: {\n        booking_id: booking._id,\n        user: false\n      },\n      refetchQueries: () => [{\n        query: PROFILE_DATA,\n        variables: {\n          host_id: context._id\n        }\n      }]\n    });\n  };\n\n  let color = \"transparent\";\n  console.log(\"event.happeningNow: \", booking.event.happeningNow);\n\n  if (booking.event.happeningNow) {// color = \"rgba(232,4,93,1)\"\n  } else {\n    if (expanded) {\n      if (md_size_memo) {\n        color = \"rgba(0,0,0,0.1)\";\n      } else {\n        color = \"white\"; //\"rgba(0,0,0,0.05)\"\n      }\n    } else {\n      if (md_size_memo) {\n        if (booking.seenHost === false) {\n          color = \"rgba(0,0,0,0.1)\";\n        }\n      } else {\n        if (booking.seenHost === false) {\n          color = \"white\";\n        }\n      }\n    }\n  }\n\n  let badgeContent;\n\n  if (booking.decided) {\n    if (booking.confirmed) {\n      badgeContent = React.createElement(DoneIcon, {\n        fontSize: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      });\n    } else {\n      badgeContent = React.createElement(CloseIcon, {\n        fontSize: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }); //\"rgba(0,0,0,0.05)\"\n    }\n  } else {\n    badgeContent = React.createElement(HelpOutlineIcon, {\n      fontSize: \"small\",\n      className: classes.dotBadge,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(Grid, {\n    item: true,\n    className: classes.mainItem,\n    style: {\n      // boxShadow: expanded ? \"4px 3px 5px 0px rgba(0,0,0,0.5)\" : \"none\",\n      color: md_size_memo ? \"white\" : \"black\",\n      width: xs_size_memo ? \"100%\" : \"85%\",\n      backgroundColor: color,\n      //expanded ? color : \"transparent\",\n      borderBottom: xs_size_memo ? \"1px solid white\" : \"2px solid lightGrey\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    onClick: handleExpandClick,\n    alignItems: \"center\",\n    className: classes.mainSolidLine,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: xs_size_memo ? 3 : 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(IconButton, {\n    \"aria-label\": \"settings\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(Badge, {\n    badgeContent: badgeContent,\n    className: classes.badge,\n    color: booking.decided ? \"primary\" : \"secondary\" // style={{ backgroundColor: booking.decided ? \"grey\" : \"red\"}}\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(Avatar, {\n    src: booking.user.picture,\n    className: classes.mainAvatar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  })))))), React.createElement(Grid, {\n    item: true,\n    xs: xs_size_memo ? 9 : 8,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"body2\",\n    align: \"left\",\n    className: classes.mainHeader,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, booking.user.name), \" wants to join your event\", \" \", React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, booking.event.name)), React.createElement(Grid, {\n    container: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"body2\",\n    align: \"left\",\n    className: classes.countdown,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, \"created \", React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, countdown(new Date(booking.createdAt), new Date(), \"X\", 1).toString(), \" \", \"ago\"))), React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    className: classes.partyOnGrid,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, booking.event.happeningNow && React.createElement(PartyOn, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  })))), !xs_size_memo && React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    style: {\n      transition: \"transform .1s ease-in-out\",\n      transform: expanded ? \"rotate(-180deg)\" : \"rotate(0deg)\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, React.createElement(IconButton, {\n    \"aria-label\": \"settings\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, React.createElement(ExpandMoreIcon, {\n    fontSize: \"large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  })))))), React.createElement(Collapse, {\n    in: expanded,\n    timeout: \"auto\",\n    unmountOnExit: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    className: classes.messageWrap,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    className: classes.messageContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, React.createElement(BookingMessages, {\n    booking: booking,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }), React.createElement(BookingAcceptInput, {\n    booking: booking,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  })))), React.createElement(Grid, {\n    container: true,\n    className: classes.middleBody,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, React.createElement(ListTopHalf, {\n    event: booking.event,\n    transparent: true,\n    context: context,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  })), React.createElement(EventButtons, {\n    event: booking.event,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }), React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    style: {\n      margin: 5\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, React.createElement(IconButton, {\n    \"aria-label\": \"settings\",\n    className: classes.iconBtn,\n    onClick: handleExpandClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }, React.createElement(ExpandLessIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }))))));\n}\nconst useStyles = makeStyles(theme => ({\n  mainItem: {// borderRadius: 15,\n    // borderBottom: \"3px solid white\" //#707070\n    // margin: 10,\n    // padding: 10\n  },\n  mainSolidLine: {\n    marginTop: 10,\n    marginBottom: 20\n  },\n  middleBody: {},\n  mainHeader: {\n    fontSize: 16,\n    marginLeft: 20,\n    marginRight: 20\n  },\n  countdown: {\n    marginTop: 10,\n    fontWeight: 400,\n    color: \"grey\",\n    marginLeft: 20\n  },\n  badge: {\n    padding: '0 important'\n  },\n  dotBadge: {\n    height: 15,\n    width: 15\n  },\n  userAvatar: {\n    backgroundColor: red[500],\n    height: 80,\n    width: 80\n  },\n  partyOnGrid: {\n    marginTop: 10\n  },\n  messageWrap: {\n    padding: 10\n  },\n  messageContainer: {\n    backgroundColor: \"rgba(0,0,0,0.38)\",\n    borderRadius: 10\n  },\n  mainAvatar: {\n    height: 60,\n    width: 60\n  },\n  thisLine: {\n    height: \"1px\",\n    width: \"100%\",\n    marginTop: \"2px\",\n    backgroundColor: \"#707070\"\n  }\n}));","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/Charlie2.0/client/src/Atoms/Profile/AcceptBookingCard.js"],"names":["React","useState","useRef","useContext","useEffect","makeStyles","Grid","Avatar","IconButton","ExpandMoreIcon","ExpandLessIcon","DoneIcon","CloseIcon","HelpOutlineIcon","Badge","Collapse","Typography","red","countdown","useMutation","useXsSize","UserContext","PROFILE_DATA","SEEN_BOOKING","ListTopHalf","PartyOn","BookingMessages","BookingAcceptInput","EventButtons","AcceptBookingCard","booking","classes","useStyles","xs_size_memo","md_size_memo","expanded","setExpanded","context","setContext","markBookingSeen","seenStates","handleExpandClick","seenHostHandle","variables","booking_id","_id","user","refetchQueries","query","host_id","color","console","log","event","happeningNow","seenHost","badgeContent","decided","confirmed","dotBadge","mainItem","width","backgroundColor","borderBottom","mainSolidLine","badge","picture","mainAvatar","mainHeader","name","Date","createdAt","toString","partyOnGrid","transition","transform","messageWrap","messageContainer","middleBody","margin","iconBtn","theme","marginTop","marginBottom","fontSize","marginLeft","marginRight","fontWeight","padding","height","userAvatar","borderRadius","thisLine"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useContext, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport Badge from '@material-ui/core/Badge';\n\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { red } from \"@material-ui/core/colors\";\n\nimport countdown from \"countdown\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\nimport { useXsSize } from \"src/Hooks/useXsSize\";\nimport { UserContext } from \"src/userContext\";\nimport { PROFILE_DATA } from \"src/Services/GQL/PROFILE_DATA\";\nimport { SEEN_BOOKING } from \"src/Services/GQL/SEEN_BOOKING\";\n\nimport ListTopHalf from \"src/Atoms/Play/ListTopHalf\";\nimport PartyOn from \"src/Atoms/PartyOn\";\nimport BookingMessages from \"src/Atoms/BookingMessages\";\nimport BookingAcceptInput from \"src/Atoms/BookingAcceptInput\";\nimport EventButtons from \"src/Molecules/event/EventButtons\";\n\n\nexport default function AcceptBookingCard({ booking }) {\n  const classes = useStyles();\n  const { xs_size_memo, md_size_memo } = useXsSize();\n  const [expanded, setExpanded] = useState(false);\n  const { context, setContext } = useContext(UserContext);\n  const [markBookingSeen, seenStates] = useMutation(SEEN_BOOKING);\n\n  useEffect(() => {\n    // if(context.expanded_id === booking._id){\n    //   setExpanded(true)\n    // }else{\n    //   setExpanded(false)\n    // }\n  }, [])\n\n\n  const handleExpandClick = () => {\n\n    if(expanded){\n      setExpanded(false)\n    } else{\n        setExpanded(true)\n    }\n    // seenHostHandle()\n  };\n\n  const seenHostHandle = () => {\n    markBookingSeen({\n      variables: {\n        booking_id: booking._id,\n        user: false,\n      },\n      refetchQueries: () => [\n        {\n          query: PROFILE_DATA,\n          variables: { host_id: context._id }\n        }\n      ]\n    });\n  };\n\n\n  \n  let color = \"transparent\"\n  console.log(\"event.happeningNow: \", booking.event.happeningNow)\n  if(booking.event.happeningNow){\n    // color = \"rgba(232,4,93,1)\"\n  }else{ if(expanded){\n      if(md_size_memo){\n        color = \"rgba(0,0,0,0.1)\"\n      } else {\n        color = \"white\" //\"rgba(0,0,0,0.05)\"\n      }\n    }else{\n      if(md_size_memo){\n          if(booking.seenHost === false){\n            color = \"rgba(0,0,0,0.1)\"\n          }\n        }else{\n            if(booking.seenHost === false){\n            color = \"white\"\n          }\n        }\n    }\n  }\n\n\nlet badgeContent \nif(booking.decided){\n    if(booking.confirmed){\n      badgeContent =  <DoneIcon fontSize=\"small\" />\n    } else {\n      badgeContent =  <CloseIcon fontSize=\"small\" /> //\"rgba(0,0,0,0.05)\"\n    }\n  } else {\n    badgeContent = <HelpOutlineIcon fontSize=\"small\" className={classes.dotBadge} /> \n  }\n\n  return (\n    <Grid\n      item\n      className={classes.mainItem}\n      style={{\n        // boxShadow: expanded ? \"4px 3px 5px 0px rgba(0,0,0,0.5)\" : \"none\",\n        color: md_size_memo ? \"white\" : \"black\",\n        width: xs_size_memo ? \"100%\" : \"85%\",\n        backgroundColor: color, //expanded ? color : \"transparent\",\n        borderBottom: xs_size_memo ? \"1px solid white\" : \"2px solid lightGrey\"\n      }}\n    >\n      <Grid\n        container\n        onClick={handleExpandClick}\n        alignItems=\"center\"\n        className={classes.mainSolidLine}\n      >\n        <Grid item xs={xs_size_memo ? 3 : 2}>\n          <Grid container justify=\"center\">\n            <Grid item>\n              <IconButton aria-label=\"settings\">\n                <Badge badgeContent={badgeContent} \n                        className={classes.badge} \n                        color={booking.decided ? \"primary\" : \"secondary\"}\n                        // style={{ backgroundColor: booking.decided ? \"grey\" : \"red\"}}\n                        >\n                  <Avatar\n                    src={booking.user.picture}\n                    className={classes.mainAvatar}\n                  />\n                </Badge>\n              </IconButton>\n            </Grid>\n\n          </Grid>\n        </Grid>\n\n        <Grid item xs={xs_size_memo ? 9 : 8}>\n          <Typography\n            variant=\"body2\"\n            align=\"left\"\n            className={classes.mainHeader}\n          >\n            <b>{booking.user.name}</b> wants to join your event{\" \"}\n            <b>{booking.event.name}</b>\n          </Typography>\n          <Grid container >\n            <Grid item xs={6}>\n              <Typography\n                variant=\"body2\"\n                align=\"left\"\n                className={classes.countdown}\n              >\n                created <b>{countdown(\n                  new Date(booking.createdAt),\n                  new Date(),\n                  \"X\",\n                  1\n                ).toString()}{\" \"}\n                ago</b>\n              </Typography>\n            </Grid>\n            <Grid item xs={6} className={classes.partyOnGrid}>\n              {booking.event.happeningNow && <PartyOn />}\n            </Grid>\n          </Grid>\n        </Grid>\n\n        {!xs_size_memo && (\n          <Grid item xs={2}>\n            <Grid container justify=\"center\">\n              <Grid\n                item\n                style={{\n                  transition: \"transform .1s ease-in-out\",\n                  transform: expanded ? \"rotate(-180deg)\" : \"rotate(0deg)\"\n                }}\n              >\n                <IconButton aria-label=\"settings\">\n                  <ExpandMoreIcon fontSize=\"large\" />\n                </IconButton>\n              </Grid>\n            </Grid>\n          </Grid>\n        )}\n      </Grid>\n      <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n        <Grid container justify=\"center\" className={classes.messageWrap}>\n          <Grid item>\n            <Grid container className={classes.messageContainer}>\n                <BookingMessages booking={booking} />\n                <BookingAcceptInput booking={booking} />\n           \n            </Grid>    \n          </Grid>\n        </Grid>\n        <Grid container className={classes.middleBody}>\n          <ListTopHalf event={booking.event} transparent={true} context={context} />\n        </Grid>\n        <EventButtons event={booking.event} />\n        <Grid container justify=\"center\">\n          <Grid item style={{margin: 5}}>\n            <IconButton aria-label=\"settings\" className={classes.iconBtn} onClick={handleExpandClick}>\n              <ExpandLessIcon />\n            </IconButton>\n          </Grid>\n        </Grid>\n      </Collapse>\n    </Grid>\n  );\n}\n\nconst useStyles = makeStyles(theme => ({\n  mainItem: {\n    // borderRadius: 15,\n    // borderBottom: \"3px solid white\" //#707070\n    // margin: 10,\n    // padding: 10\n  },\n  mainSolidLine: {\n    marginTop: 10,\n    marginBottom: 20\n  },\n  middleBody: {},\n  mainHeader: {\n    fontSize: 16,\n    marginLeft: 20,\n    marginRight: 20\n  },\n  countdown: {\n    marginTop: 10,\n    fontWeight: 400,\n    color: \"grey\",\n    marginLeft: 20\n  },\n  badge: {\n    padding: '0 important'\n  },\n  dotBadge: {\n    height: 15,\n    width: 15\n  },\n  userAvatar: {\n    backgroundColor: red[500],\n    height: 80,\n    width: 80\n  },\n  partyOnGrid: {\n    marginTop: 10\n  },\n  messageWrap: {\n    padding: 10\n  },\n  \n  messageContainer: {\n    backgroundColor: \"rgba(0,0,0,0.38)\",\n    borderRadius: 10\n  },\n  mainAvatar: {\n    height: 60,\n    width: 60\n  },\n\n  thisLine: {\n    height: \"1px\",\n    width: \"100%\",\n    marginTop: \"2px\",\n    backgroundColor: \"#707070\"\n  }\n}));\n"]},"metadata":{},"sourceType":"module"}