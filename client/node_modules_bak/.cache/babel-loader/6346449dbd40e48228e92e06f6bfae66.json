{"ast":null,"code":"import _defineProperty from\"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{useState,useEffect}from\"react\";export var usePosition=function usePosition(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),position=_useState2[0],setPosition=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),address=_useState6[0],setAddress=_useState6[1];var geocoder;var onChange=function onChange(_ref){var coords=_ref.coords;console.log(\"Found your New Location: \",coords.latitude,coords.longitude);// Find Address:\ngeocoder=new window.google.maps.Geocoder();geocoder.geocode({location:{lat:coords.latitude,lng:coords.longitude}},function(results,status,error_message){if(results){var spl=results[0].formatted_address.split(\" \");setAddress(\"\".concat(spl[spl.length-2],\" \").concat(spl[spl.length-1]));}else{console.log(\"NOOOO Setting address to context: \");}});setPosition({latitude:coords.latitude,longitude:coords.longitude});};var onError=function onError(error){setError(error.message);};useEffect(function(){var geo=window.navigator.geolocation;if(!geo){setError(\"Geolocation is not supported\");return;}//let watcher = geo.watchPosition(onChange, onError);\nvar watcher=geo.getCurrentPosition(onChange,onError);return function(){return geo.clearWatch(watcher);};},[]);return _objectSpread({},position,{address:address,error:error});};export var Memoized=React.memo(usePosition);//export default Memoized;","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/Charlie2.0/client/src/Hooks/useGeolocation.js"],"names":["React","useState","useEffect","usePosition","position","setPosition","error","setError","address","setAddress","geocoder","onChange","coords","console","log","latitude","longitude","window","google","maps","Geocoder","geocode","location","lat","lng","results","status","error_message","spl","formatted_address","split","length","onError","message","geo","navigator","geolocation","watcher","getCurrentPosition","clearWatch","Memoized","memo"],"mappings":"whCAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAO,IAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,eACCF,QAAQ,CAAC,EAAD,CADT,wCACxBG,QADwB,eACdC,WADc,8BAELJ,QAAQ,CAAC,IAAD,CAFH,yCAExBK,KAFwB,eAEjBC,QAFiB,8BAGDN,QAAQ,CAAC,EAAD,CAHP,yCAGxBO,OAHwB,eAGfC,UAHe,eAI/B,GAAIC,CAAAA,QAAJ,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAgB,IAAbC,CAAAA,MAAa,MAAbA,MAAa,CAC/BC,OAAO,CAACC,GAAR,CAAY,2BAAZ,CAAyCF,MAAM,CAACG,QAAhD,CAA0DH,MAAM,CAACI,SAAjE,EAEJ;AAEEN,QAAQ,CAAG,GAAIO,CAAAA,MAAM,CAACC,MAAP,CAAcC,IAAd,CAAmBC,QAAvB,EAAX,CAEAV,QAAQ,CAACW,OAAT,CAAiB,CAAEC,QAAQ,CAAE,CAAEC,GAAG,CAAEX,MAAM,CAACG,QAAd,CAAwBS,GAAG,CAAEZ,MAAM,CAACI,SAApC,CAAZ,CAAjB,CAAgF,SAC9ES,OAD8E,CAE9EC,MAF8E,CAG9EC,aAH8E,CAI/E,CACC,GAAIF,OAAJ,CAAa,CACX,GAAIG,CAAAA,GAAG,CAAGH,OAAO,CAAC,CAAD,CAAP,CAAWI,iBAAX,CAA6BC,KAA7B,CAAmC,GAAnC,CAAV,CACArB,UAAU,WAAImB,GAAG,CAAEA,GAAG,CAACG,MAAJ,CAAW,CAAb,CAAP,aAA2BH,GAAG,CAAEA,GAAG,CAACG,MAAJ,CAAW,CAAb,CAA9B,EAAV,CACD,CAHD,IAGO,CACLlB,OAAO,CAACC,GAAR,CAAY,oCAAZ,EACD,CACF,CAXD,EAaET,WAAW,CAAC,CACVU,QAAQ,CAAEH,MAAM,CAACG,QADP,CAEVC,SAAS,CAAEJ,MAAM,CAACI,SAFR,CAAD,CAAX,CAMD,CA1BD,CA6BA,GAAMgB,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAAA1B,KAAK,CAAI,CACvBC,QAAQ,CAACD,KAAK,CAAC2B,OAAP,CAAR,CACD,CAFD,CAKA/B,SAAS,CAAC,UAAM,CACd,GAAMgC,CAAAA,GAAG,CAAGjB,MAAM,CAACkB,SAAP,CAAiBC,WAA7B,CACA,GAAI,CAACF,GAAL,CAAU,CACR3B,QAAQ,CAAC,8BAAD,CAAR,CACA,OACD,CACD;AACA,GAAI8B,CAAAA,OAAO,CAAGH,GAAG,CAACI,kBAAJ,CAAuB3B,QAAvB,CAAiCqB,OAAjC,CAAd,CACA,MAAO,kBAAME,CAAAA,GAAG,CAACK,UAAJ,CAAeF,OAAf,CAAN,EAAP,CACD,CATQ,CASN,EATM,CAAT,CAUA,wBAAYjC,QAAZ,EAAsBI,OAAO,CAAPA,OAAtB,CAA+BF,KAAK,CAALA,KAA/B,GACD,CAnDM,CAqDP,MAAO,IAAMkC,CAAAA,QAAQ,CAAGxC,KAAK,CAACyC,IAAN,CAAWtC,WAAX,CAAjB,CACP","sourcesContent":["import React, { useState, useEffect } from \"react\";\nexport const usePosition = () => {\n  const [position, setPosition] = useState({});\n  const [error, setError] = useState(null);\n  const [address, setAddress] = useState('')\n  let geocoder;\n\n  const onChange = ({ coords }) => {\n    console.log(\"Found your New Location: \", coords.latitude, coords.longitude)\n\n// Find Address:\n\n  geocoder = new window.google.maps.Geocoder();\n\n  geocoder.geocode({ location: { lat: coords.latitude, lng: coords.longitude } }, function(\n    results,\n    status,\n    error_message\n  ){\n    if (results) {\n      var spl = results[0].formatted_address.split(\" \");\n      setAddress(`${spl[(spl.length-2)]} ${spl[(spl.length-1)]}`)\n    } else {\n      console.log(\"NOOOO Setting address to context: \")\n    }\n  }\n  )\n    setPosition({\n      latitude: coords.latitude,\n      longitude: coords.longitude\n    });\n\n\n  };\n\n\n  const onError = error => {\n    setError(error.message);\n  };\n\n\n  useEffect(() => {\n    const geo = window.navigator.geolocation;\n    if (!geo) {\n      setError(\"Geolocation is not supported\");\n      return;\n    }\n    //let watcher = geo.watchPosition(onChange, onError);\n    let watcher = geo.getCurrentPosition(onChange, onError);\n    return () => geo.clearWatch(watcher);\n  }, []);\n  return { ...position, address, error };\n};\n\nexport const Memoized = React.memo(usePosition);\n//export default Memoized;\n"]},"metadata":{},"sourceType":"module"}