{"ast":null,"code":"import _slicedToArray from \"/Users/petrhoskovec/Desktop/code/Charlie2.0-renew/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/petrhoskovec/Desktop/code/Charlie2.0-renew/Charlie2.0/client/src/Atoms/Profile/RatingCardNew.js\";\nimport React, { useState, useRef, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { red } from \"@material-ui/core/colors\";\nimport countdown from \"countdown\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { useXsSize } from \"../../Hooks/useXsSize\";\nimport { UserContext } from \"../../userContext\";\nimport { PROFILE_DATA } from \"src/Services/GQL/PROFILE_DATA\";\nimport { SEEN_RATING } from \"src/Services/GQL/SEEN_RATING\";\nimport EventInfoLines from \"./EventInfoLines\";\nimport ListTopHalf from \"src/Atoms/Play/ListTopHalf\";\nexport default function AcceptBookingCard({\n  rating\n}) {\n  const classes = useStyles();\n\n  const _useXsSize = useXsSize(),\n        xs_size_memo = _useXsSize.xs_size_memo,\n        md_size_memo = _useXsSize.md_size_memo;\n\n  const _useContext = useContext(UserContext),\n        context = _useContext.context;\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        expanded = _useState2[0],\n        setExpanded = _useState2[1];\n\n  const _useMutation = useMutation(SEEN_RATING),\n        _useMutation2 = _slicedToArray(_useMutation, 2),\n        markRatingSeen = _useMutation2[0],\n        seenStates = _useMutation2[1]; // console.log(\"event card props: \", props);\n\n\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n\n    if (rating.seenHost === false) {\n      seenHostHandle();\n    }\n  };\n\n  const seenHostHandle = () => {\n    markRatingSeen({\n      variables: {\n        rating_id: rating._id\n      },\n      refetchQueries: () => [{\n        query: PROFILE_DATA,\n        variables: {\n          host_id: context._id\n        }\n      }]\n    });\n  };\n\n  let color = \"transparent\";\n\n  if (expanded) {\n    if (md_size_memo) {\n      color = \"rgba(0,0,0,0.1)\";\n    } else {\n      color = \"white\"; //\"rgba(0,0,0,0.05)\"\n    }\n  } else {\n    if (md_size_memo) {\n      if (rating.seenHost === false) {\n        color = \"rgba(0,0,0,0.1)\";\n      }\n    } else {\n      if (rating.seenHost === false) {\n        color = \"white\";\n      }\n    }\n  }\n\n  let badgeContent;\n  return React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    alignItems: \"flex-start\",\n    className: classes.naimContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    className: classes.mainItem,\n    style: {\n      // boxShadow: expanded ? \"4px 3px 5px 0px rgba(0,0,0,0.5)\" : \"none\",\n      color: md_size_memo ? \"white\" : \"black\",\n      width: xs_size_memo ? \"100%\" : \"85%\",\n      backgroundColor: color,\n      //expanded ? color : \"transparent\",\n      borderBottom: xs_size_memo ? \"1px solid white\" : \"2px solid lightGrey\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    onClick: handleExpandClick,\n    alignItems: \"center\",\n    className: classes.mainSolidLine,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: xs_size_memo ? 3 : 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    className: classes.itemAvatar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(IconButton, {\n    \"aria-label\": \"settings\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(Avatar, {\n    alt: rating.guest.name,\n    src: rating.guest.picture ? rating.guest.picture : null,\n    className: classes.mainAvatar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"X\"))))), React.createElement(Grid, {\n    item: true,\n    xs: xs_size_memo ? 9 : 8,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"body2\",\n    align: \"left\",\n    className: classes.mainHeader,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, rating.guest.name), \" rated you. Event \", React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, rating.event.name)), React.createElement(Typography, {\n    variant: \"body2\",\n    align: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }), React.createElement(Typography, {\n    variant: \"body2\",\n    align: \"left\",\n    className: classes.countdown,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, !expanded ? React.createElement(Rating, {\n    name: \"simple-controlled\",\n    readOnly: true,\n    value: rating.ratingValue,\n    className: classes.ratingSmall,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }) : null, \"rated \", React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, countdown(new Date(rating.createdAt), new Date(), \"X\", 1).toString(), \" \", \"ago\"))), !xs_size_memo && React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    style: {\n      transition: \"transform .1s ease-in-out\",\n      transform: expanded ? \"rotate(-180deg)\" : \"rotate(0deg)\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, React.createElement(IconButton, {\n    \"aria-label\": \"settings\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(ExpandMoreIcon, {\n    fontSize: \"large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  })))))), React.createElement(Collapse, {\n    in: expanded,\n    timeout: \"auto\",\n    unmountOnExit: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    alignItems: \"center\",\n    direction: \"row\",\n    spacing: 2,\n    className: classes.middleBody,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    className: classes.middleBody,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(ListTopHalf, {\n    event: rating.event,\n    transparent: true,\n    context: context,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  })), React.createElement(Grid, {\n    container: true,\n    alignItems: \"center\",\n    direction: \"column\",\n    className: classes.starsBody,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    className: classes.body,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, React.createElement(Rating, {\n    name: \"simple-controlled\",\n    readOnly: true,\n    value: rating.ratingValue,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  })), React.createElement(Grid, {\n    item: true,\n    className: classes.body,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"body2\",\n    align: \"left\",\n    className: classes.mainHeader,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, rating.message))))))));\n}\nconst useStyles = makeStyles(theme => ({\n  naimContainer: {\n    color: \"black\",\n    width: \"100%\"\n  },\n  mainItem: {// borderRadius: 15,\n    // borderBottom: \"3px solid white\" //#707070\n    // margin: 10,\n    // padding: 10\n  },\n  mainSolidLine: {\n    marginTop: 10,\n    marginBottom: 20\n  },\n  leftMiddleItem: {},\n  middleBody: {\n    paddingBottom: 10,\n    width: \"100%\"\n  },\n  ratingSmall: {\n    marginRight: 20,\n    marginTop: 10,\n    fontSize: 14\n  },\n  starsBody: {\n    paddingTop: 10,\n    paddingBottom: 10\n  },\n  mainHeader: {\n    fontSize: 16,\n    marginLeft: 20,\n    marginRight: 20\n  },\n  countdown: {\n    marginTop: 10,\n    fontWeight: 400,\n    color: \"grey\",\n    marginLeft: 20\n  },\n  badge: {\n    padding: '0 important'\n  },\n  dotBadge: {\n    height: 15,\n    width: 15\n  },\n  userAvatar: {\n    backgroundColor: red[500],\n    height: 80,\n    width: 80\n  },\n  btnContainer: {\n    marginBottom: 5,\n    marginTop: 10\n  },\n  textField: {},\n  textFieldCont: {\n    margin: 10\n  },\n  btnWrapLeft: {\n    borderRight: \"1px solid #707070\"\n  },\n  btn: {// height: 50,\n    // width: \"50%\"\n  },\n  itemAvatar: {},\n  mainAvatar: {\n    height: 60,\n    width: 60,\n    backgroundColor: \"grey\",\n    color: \"white\"\n  }\n}));","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/Charlie2.0-renew/Charlie2.0/client/src/Atoms/Profile/RatingCardNew.js"],"names":["React","useState","useRef","useContext","makeStyles","Grid","Avatar","IconButton","ExpandMoreIcon","Rating","Collapse","Typography","red","countdown","useMutation","useXsSize","UserContext","PROFILE_DATA","SEEN_RATING","EventInfoLines","ListTopHalf","AcceptBookingCard","rating","classes","useStyles","xs_size_memo","md_size_memo","context","expanded","setExpanded","markRatingSeen","seenStates","handleExpandClick","seenHost","seenHostHandle","variables","rating_id","_id","refetchQueries","query","host_id","color","badgeContent","naimContainer","mainItem","width","backgroundColor","borderBottom","mainSolidLine","itemAvatar","guest","name","picture","mainAvatar","mainHeader","event","ratingValue","ratingSmall","Date","createdAt","toString","transition","transform","middleBody","starsBody","body","message","theme","marginTop","marginBottom","leftMiddleItem","paddingBottom","marginRight","fontSize","paddingTop","marginLeft","fontWeight","badge","padding","dotBadge","height","userAvatar","btnContainer","textField","textFieldCont","margin","btnWrapLeft","borderRight","btn"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport Rating from \"@material-ui/lab/Rating\";\n\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { red } from \"@material-ui/core/colors\";\n\nimport countdown from \"countdown\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\nimport { useXsSize } from \"../../Hooks/useXsSize\";\nimport { UserContext } from \"../../userContext\";\nimport { PROFILE_DATA } from \"src/Services/GQL/PROFILE_DATA\";\nimport { SEEN_RATING } from \"src/Services/GQL/SEEN_RATING\";\n\nimport EventInfoLines from \"./EventInfoLines\";\nimport ListTopHalf from \"src/Atoms/Play/ListTopHalf\";\n\nexport default function AcceptBookingCard({ rating }) {\n  const classes = useStyles();\n  const { xs_size_memo, md_size_memo } = useXsSize();\n  const { context } = useContext(UserContext);\n\n  const [expanded, setExpanded] = useState(false);\n\n  const [markRatingSeen, seenStates] = useMutation(SEEN_RATING);\n\n\n  // console.log(\"event card props: \", props);\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n    if(rating.seenHost === false){ seenHostHandle() }\n  };\n\n  const seenHostHandle = () => {\n    markRatingSeen({\n      variables: {\n        rating_id: rating._id,\n      },\n      refetchQueries: () => [\n        {\n          query: PROFILE_DATA,\n          variables: { host_id: context._id }\n        }\n      ]\n    });\n  };\n\n  let color = \"transparent\"\n  if(expanded){\n    if(md_size_memo){\n      color = \"rgba(0,0,0,0.1)\"\n    } else {\n      color = \"white\" //\"rgba(0,0,0,0.05)\"\n    }\n  }else{\n    if(md_size_memo){\n      if(rating.seenHost === false){\n        color = \"rgba(0,0,0,0.1)\"\n      }\n    }else{\n          if(rating.seenHost === false){\n      color = \"white\"\n    }\n    }\n  }\n\nlet badgeContent \n\n  return (\n    <Grid container justify=\"center\" alignItems=\"flex-start\" className={classes.naimContainer}>\n    <Grid\n      item\n      className={classes.mainItem}\n      style={{\n        // boxShadow: expanded ? \"4px 3px 5px 0px rgba(0,0,0,0.5)\" : \"none\",\n        color: md_size_memo ? \"white\" : \"black\",\n        width: xs_size_memo ? \"100%\" : \"85%\",\n        backgroundColor: color, //expanded ? color : \"transparent\",\n        borderBottom: xs_size_memo ? \"1px solid white\" : \"2px solid lightGrey\"\n      }}\n    >\n      <Grid\n        container\n        onClick={handleExpandClick}\n        alignItems=\"center\"\n        className={classes.mainSolidLine}\n      >\n        <Grid item xs={xs_size_memo ? 3 : 2}>\n          <Grid container justify=\"center\">\n            <Grid item className={classes.itemAvatar}>\n              <IconButton aria-label=\"settings\">\n                  <Avatar\n                    alt={rating.guest.name}\n                    src={rating.guest.picture ? rating.guest.picture : null}\n                    className={classes.mainAvatar}\n                  >X</Avatar>\n              </IconButton>\n            </Grid>\n\n          </Grid>\n        </Grid>\n\n        <Grid item xs={xs_size_memo ? 9 : 8}>\n          <Typography\n            variant=\"body2\"\n            align=\"left\"\n            className={classes.mainHeader}\n          >\n            <b>{rating.guest.name}</b> rated you. Event <b>{rating.event.name}</b>\n          </Typography>\n          <Typography\n            variant=\"body2\"\n            align=\"left\"\n          >\n            \n          </Typography>\n          <Typography\n            variant=\"body2\"\n            align=\"left\"\n            className={classes.countdown}\n          >\n           {!expanded ? <Rating name=\"simple-controlled\" readOnly value={rating.ratingValue}  className={classes.ratingSmall}/> : null}\n          rated <b>{countdown(\n              new Date(rating.createdAt),\n              new Date(),\n              \"X\",\n              1\n            ).toString()}{\" \"}\n            ago</b>\n          </Typography>\n        </Grid>\n\n        {!xs_size_memo && (\n          <Grid item xs={2}>\n            <Grid container justify=\"center\">\n              <Grid\n                item\n                style={{\n                  transition: \"transform .1s ease-in-out\",\n                  transform: expanded ? \"rotate(-180deg)\" : \"rotate(0deg)\"\n                }}\n              >\n                <IconButton aria-label=\"settings\">\n                  <ExpandMoreIcon fontSize=\"large\" />\n                </IconButton>\n              </Grid>\n            </Grid>\n          </Grid>\n        )}\n      </Grid>\n      <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n        <Grid\n          container\n          alignItems=\"center\"\n          direction=\"row\"\n          spacing={2}\n          className={classes.middleBody}\n        >\n                        {/* <EventInfoLines\n                event={rating.event}\n                name={rating.event.name}\n                date={rating.event.dateStart}\n              />           */}\n            <Grid container className={classes.middleBody}>\n                <ListTopHalf event={rating.event} transparent={true} context={context}/>\n            </Grid>\n\n            <Grid container alignItems=\"center\" direction=\"column\" className={classes.starsBody}>\n                  <Grid item className={classes.body}>\n                  <Rating name=\"simple-controlled\" readOnly value={rating.ratingValue} />\n                  </Grid>\n                  <Grid item className={classes.body}>\n                    <Typography\n                    variant=\"body2\"\n                    align=\"left\"\n                    className={classes.mainHeader}\n                  >\n                    <b>{rating.message}</b>\n                  </Typography>\n                  </Grid>\n            </Grid>\n\n        </Grid>\n      </Collapse>\n    </Grid>\n    </Grid>\n  );\n}\n\nconst useStyles = makeStyles(theme => ({\n  naimContainer: {\n    color: \"black\",\n    width: \"100%\", \n  },\n  mainItem: {\n    // borderRadius: 15,\n    // borderBottom: \"3px solid white\" //#707070\n    // margin: 10,\n    // padding: 10\n  },\n  mainSolidLine: {\n    marginTop: 10,\n    marginBottom: 20\n  },\n  leftMiddleItem: {},\n  middleBody: {\n    paddingBottom: 10,\n    width: \"100%\"\n  },\n  ratingSmall:{\n    marginRight: 20,\n    marginTop: 10,\n    fontSize: 14,\n  },\n  starsBody: {\n    paddingTop: 10,\n    paddingBottom: 10\n  },\n  mainHeader: {\n    fontSize: 16,\n    marginLeft: 20,\n    marginRight: 20\n  },\n  countdown: {\n    marginTop: 10,\n    fontWeight: 400,\n    color: \"grey\",\n    marginLeft: 20\n  },\n  badge: {\n    padding: '0 important'\n  },\n  dotBadge: {\n    height: 15,\n    width: 15\n  },\n  userAvatar: {\n    backgroundColor: red[500],\n    height: 80,\n    width: 80\n  },\n  btnContainer: {\n    marginBottom: 5,\n    marginTop: 10\n  },\n  textField: {},\n  textFieldCont: {\n    margin: 10\n  },\n  btnWrapLeft: {\n    borderRight: \"1px solid #707070\"\n  },\n  btn: {\n    // height: 50,\n    // width: \"50%\"\n  },\n  itemAvatar: {\n\n  },\n  mainAvatar: {\n    height: 60,\n    width: 60,\n    backgroundColor: \"grey\",\n    color: \"white\"\n  },\n\n}));\n"]},"metadata":{},"sourceType":"module"}