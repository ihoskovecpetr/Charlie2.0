{"ast":null,"code":"import _defineProperty from \"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nexport const usePosition = () => {\n  const _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        position = _useState2[0],\n        setPosition = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        error = _useState4[0],\n        setError = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        address = _useState6[0],\n        setAddress = _useState6[1];\n\n  let geocoder;\n\n  const onChange = ({\n    coords\n  }) => {\n    console.log(\"Found your New Location: \", coords.latitude, coords.longitude); // Find Address:\n\n    geocoder = new window.google.maps.Geocoder();\n    geocoder.geocode({\n      location: {\n        lat: coords.latitude,\n        lng: coords.longitude\n      }\n    }, function (results, status, error_message) {\n      if (results) {\n        var spl = results[0].formatted_address.split(\" \");\n        setAddress(\"\".concat(spl[spl.length - 2], \" \").concat(spl[spl.length - 1]));\n      } else {\n        console.log(\"NOOOO Setting address to context: \");\n      }\n    });\n    setPosition({\n      latitude: coords.latitude,\n      longitude: coords.longitude\n    });\n  };\n\n  const onError = error => {\n    setError(error.message);\n  };\n\n  useEffect(() => {\n    const geo = window.navigator.geolocation;\n\n    if (!geo) {\n      setError(\"Geolocation is not supported\");\n      return;\n    } //let watcher = geo.watchPosition(onChange, onError);\n\n\n    let watcher = geo.getCurrentPosition(onChange, onError);\n    return () => geo.clearWatch(watcher);\n  }, []);\n  return _objectSpread({}, position, {\n    address,\n    error\n  });\n};\nexport const Memoized = React.memo(usePosition); //export default Memoized;","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/Charlie2.0/client/src/Hooks/useGeolocation.js"],"names":["React","useState","useEffect","usePosition","position","setPosition","error","setError","address","setAddress","geocoder","onChange","coords","console","log","latitude","longitude","window","google","maps","Geocoder","geocode","location","lat","lng","results","status","error_message","spl","formatted_address","split","length","onError","message","geo","navigator","geolocation","watcher","getCurrentPosition","clearWatch","Memoized","memo"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAO,MAAMC,WAAW,GAAG,MAAM;AAAA,oBACCF,QAAQ,CAAC,EAAD,CADT;AAAA;AAAA,QACxBG,QADwB;AAAA,QACdC,WADc;;AAAA,qBAELJ,QAAQ,CAAC,IAAD,CAFH;AAAA;AAAA,QAExBK,KAFwB;AAAA,QAEjBC,QAFiB;;AAAA,qBAGDN,QAAQ,CAAC,EAAD,CAHP;AAAA;AAAA,QAGxBO,OAHwB;AAAA,QAGfC,UAHe;;AAI/B,MAAIC,QAAJ;;AAEA,QAAMC,QAAQ,GAAG,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAgB;AAC/BC,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCF,MAAM,CAACG,QAAhD,EAA0DH,MAAM,CAACI,SAAjE,EAD+B,CAGnC;;AAEEN,IAAAA,QAAQ,GAAG,IAAIO,MAAM,CAACC,MAAP,CAAcC,IAAd,CAAmBC,QAAvB,EAAX;AAEAV,IAAAA,QAAQ,CAACW,OAAT,CAAiB;AAAEC,MAAAA,QAAQ,EAAE;AAAEC,QAAAA,GAAG,EAAEX,MAAM,CAACG,QAAd;AAAwBS,QAAAA,GAAG,EAAEZ,MAAM,CAACI;AAApC;AAAZ,KAAjB,EAAgF,UAC9ES,OAD8E,EAE9EC,MAF8E,EAG9EC,aAH8E,EAI/E;AACC,UAAIF,OAAJ,EAAa;AACX,YAAIG,GAAG,GAAGH,OAAO,CAAC,CAAD,CAAP,CAAWI,iBAAX,CAA6BC,KAA7B,CAAmC,GAAnC,CAAV;AACArB,QAAAA,UAAU,WAAImB,GAAG,CAAEA,GAAG,CAACG,MAAJ,GAAW,CAAb,CAAP,cAA2BH,GAAG,CAAEA,GAAG,CAACG,MAAJ,GAAW,CAAb,CAA9B,EAAV;AACD,OAHD,MAGO;AACLlB,QAAAA,OAAO,CAACC,GAAR,CAAY,oCAAZ;AACD;AACF,KAXD;AAaET,IAAAA,WAAW,CAAC;AACVU,MAAAA,QAAQ,EAAEH,MAAM,CAACG,QADP;AAEVC,MAAAA,SAAS,EAAEJ,MAAM,CAACI;AAFR,KAAD,CAAX;AAMD,GA1BD;;AA6BA,QAAMgB,OAAO,GAAG1B,KAAK,IAAI;AACvBC,IAAAA,QAAQ,CAACD,KAAK,CAAC2B,OAAP,CAAR;AACD,GAFD;;AAKA/B,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMgC,GAAG,GAAGjB,MAAM,CAACkB,SAAP,CAAiBC,WAA7B;;AACA,QAAI,CAACF,GAAL,EAAU;AACR3B,MAAAA,QAAQ,CAAC,8BAAD,CAAR;AACA;AACD,KALa,CAMd;;;AACA,QAAI8B,OAAO,GAAGH,GAAG,CAACI,kBAAJ,CAAuB3B,QAAvB,EAAiCqB,OAAjC,CAAd;AACA,WAAO,MAAME,GAAG,CAACK,UAAJ,CAAeF,OAAf,CAAb;AACD,GATQ,EASN,EATM,CAAT;AAUA,2BAAYjC,QAAZ;AAAsBI,IAAAA,OAAtB;AAA+BF,IAAAA;AAA/B;AACD,CAnDM;AAqDP,OAAO,MAAMkC,QAAQ,GAAGxC,KAAK,CAACyC,IAAN,CAAWtC,WAAX,CAAjB,C,CACP","sourcesContent":["import React, { useState, useEffect } from \"react\";\nexport const usePosition = () => {\n  const [position, setPosition] = useState({});\n  const [error, setError] = useState(null);\n  const [address, setAddress] = useState('')\n  let geocoder;\n\n  const onChange = ({ coords }) => {\n    console.log(\"Found your New Location: \", coords.latitude, coords.longitude)\n\n// Find Address:\n\n  geocoder = new window.google.maps.Geocoder();\n\n  geocoder.geocode({ location: { lat: coords.latitude, lng: coords.longitude } }, function(\n    results,\n    status,\n    error_message\n  ){\n    if (results) {\n      var spl = results[0].formatted_address.split(\" \");\n      setAddress(`${spl[(spl.length-2)]} ${spl[(spl.length-1)]}`)\n    } else {\n      console.log(\"NOOOO Setting address to context: \")\n    }\n  }\n  )\n    setPosition({\n      latitude: coords.latitude,\n      longitude: coords.longitude\n    });\n\n\n  };\n\n\n  const onError = error => {\n    setError(error.message);\n  };\n\n\n  useEffect(() => {\n    const geo = window.navigator.geolocation;\n    if (!geo) {\n      setError(\"Geolocation is not supported\");\n      return;\n    }\n    //let watcher = geo.watchPosition(onChange, onError);\n    let watcher = geo.getCurrentPosition(onChange, onError);\n    return () => geo.clearWatch(watcher);\n  }, []);\n  return { ...position, address, error };\n};\n\nexport const Memoized = React.memo(usePosition);\n//export default Memoized;\n"]},"metadata":{},"sourceType":"module"}