{"ast":null,"code":"import _slicedToArray from\"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useContext,useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Grid from\"@material-ui/core/Grid\";import Avatar from\"@material-ui/core/Avatar\";import IconButton from\"@material-ui/core/IconButton\";import ExpandMoreIcon from\"@material-ui/icons/ExpandMore\";import ExpandLessIcon from\"@material-ui/icons/ExpandLess\";import DoneIcon from'@material-ui/icons/Done';import CloseIcon from'@material-ui/icons/Close';import HelpOutlineIcon from'@material-ui/icons/HelpOutline';import Badge from'@material-ui/core/Badge';import Collapse from\"@material-ui/core/Collapse\";import Typography from\"@material-ui/core/Typography\";import{red}from\"@material-ui/core/colors\";import countdown from\"countdown\";import{useMutation}from\"@apollo/react-hooks\";import{useXsSize}from\"src/Hooks/useXsSize\";import{UserContext}from\"src/userContext\";import{PROFILE_DATA}from\"src/Services/GQL/PROFILE_DATA\";import{SEEN_BOOKING}from\"src/Services/GQL/SEEN_BOOKING\";import ListTopHalf from\"src/Atoms/Play/ListTopHalf\";import PartyOn from\"src/Atoms/PartyOn\";import BookingMessages from\"src/Atoms/BookingMessages\";import BookingAcceptInput from\"src/Atoms/BookingAcceptInput\";import EventButtons from\"src/Molecules/event/EventButtons\";export default function AcceptBookingCard(_ref){var booking=_ref.booking;var classes=useStyles();var _useXsSize=useXsSize(),xs_size_memo=_useXsSize.xs_size_memo,md_size_memo=_useXsSize.md_size_memo;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),expanded=_useState2[0],setExpanded=_useState2[1];var _useContext=useContext(UserContext),context=_useContext.context,setContext=_useContext.setContext;var _useMutation=useMutation(SEEN_BOOKING),_useMutation2=_slicedToArray(_useMutation,2),markBookingSeen=_useMutation2[0],seenStates=_useMutation2[1];useEffect(function(){// if(context.expanded_id === booking._id){\n//   setExpanded(true)\n// }else{\n//   setExpanded(false)\n// }\n},[]);var handleExpandClick=function handleExpandClick(){if(expanded){setExpanded(false);}else{setExpanded(true);}// seenHostHandle()\n};var seenHostHandle=function seenHostHandle(){markBookingSeen({variables:{booking_id:booking._id,user:false},refetchQueries:function refetchQueries(){return[{query:PROFILE_DATA,variables:{host_id:context._id}}];}});};var color=\"transparent\";console.log(\"event.happeningNow: \",booking.event.happeningNow);if(booking.event.happeningNow){// color = \"rgba(232,4,93,1)\"\n}else{if(expanded){if(md_size_memo){color=\"rgba(0,0,0,0.1)\";}else{color=\"white\";//\"rgba(0,0,0,0.05)\"\n}}else{if(md_size_memo){if(booking.seenHost===false){color=\"rgba(0,0,0,0.1)\";}}else{if(booking.seenHost===false){color=\"white\";}}}}var badgeContent;if(booking.decided){if(booking.confirmed){badgeContent=React.createElement(DoneIcon,{fontSize:\"small\"});}else{badgeContent=React.createElement(CloseIcon,{fontSize:\"small\"});//\"rgba(0,0,0,0.05)\"\n}}else{badgeContent=React.createElement(HelpOutlineIcon,{fontSize:\"small\",className:classes.dotBadge});}return React.createElement(Grid,{item:true,className:classes.mainItem,style:{// boxShadow: expanded ? \"4px 3px 5px 0px rgba(0,0,0,0.5)\" : \"none\",\ncolor:md_size_memo?\"white\":\"black\",width:xs_size_memo?\"100%\":\"85%\",backgroundColor:color,//expanded ? color : \"transparent\",\nborderBottom:xs_size_memo?\"1px solid white\":\"2px solid lightGrey\"}},React.createElement(Grid,{container:true,onClick:handleExpandClick,alignItems:\"center\",className:classes.mainSolidLine},React.createElement(Grid,{item:true,xs:xs_size_memo?3:2},React.createElement(Grid,{container:true,justify:\"center\"},React.createElement(Grid,{item:true},React.createElement(IconButton,{\"aria-label\":\"settings\"},React.createElement(Badge,{badgeContent:badgeContent,className:classes.badge,color:booking.decided?\"primary\":\"secondary\"// style={{ backgroundColor: booking.decided ? \"grey\" : \"red\"}}\n},React.createElement(Avatar,{src:booking.user.picture,className:classes.mainAvatar})))))),React.createElement(Grid,{item:true,xs:xs_size_memo?9:8},React.createElement(Typography,{variant:\"body2\",align:\"left\",className:classes.mainHeader},React.createElement(\"b\",null,booking.user.name),\" wants to join your event\",\" \",React.createElement(\"b\",null,booking.event.name)),React.createElement(Grid,{container:true},React.createElement(Grid,{item:true,xs:6},React.createElement(Typography,{variant:\"body2\",align:\"left\",className:classes.countdown},\"created \",React.createElement(\"b\",null,countdown(new Date(booking.createdAt),new Date(),\"X\",1).toString(),\" \",\"ago\"))),React.createElement(Grid,{item:true,xs:6,className:classes.partyOnGrid},booking.event.happeningNow&&React.createElement(PartyOn,null)))),!xs_size_memo&&React.createElement(Grid,{item:true,xs:2},React.createElement(Grid,{container:true,justify:\"center\"},React.createElement(Grid,{item:true,style:{transition:\"transform .1s ease-in-out\",transform:expanded?\"rotate(-180deg)\":\"rotate(0deg)\"}},React.createElement(IconButton,{\"aria-label\":\"settings\"},React.createElement(ExpandMoreIcon,{fontSize:\"large\"})))))),React.createElement(Collapse,{in:expanded,timeout:\"auto\",unmountOnExit:true},React.createElement(Grid,{container:true,justify:\"center\",className:classes.messageWrap},React.createElement(Grid,{item:true},React.createElement(Grid,{container:true,className:classes.messageContainer},React.createElement(BookingMessages,{booking:booking}),React.createElement(BookingAcceptInput,{booking:booking})))),React.createElement(Grid,{container:true,className:classes.middleBody},React.createElement(ListTopHalf,{event:booking.event,transparent:true,context:context})),React.createElement(EventButtons,{event:booking.event}),React.createElement(Grid,{container:true,justify:\"center\"},React.createElement(Grid,{item:true,style:{margin:5}},React.createElement(IconButton,{\"aria-label\":\"settings\",className:classes.iconBtn,onClick:handleExpandClick},React.createElement(ExpandLessIcon,null))))));}var useStyles=makeStyles(function(theme){return{mainItem:{// borderRadius: 15,\n// borderBottom: \"3px solid white\" //#707070\n// margin: 10,\n// padding: 10\n},mainSolidLine:{marginTop:10,marginBottom:20},middleBody:{},mainHeader:{fontSize:16,marginLeft:20,marginRight:20},countdown:{marginTop:10,fontWeight:400,color:\"grey\",marginLeft:20},badge:{padding:'0 important'},dotBadge:{height:15,width:15},userAvatar:{backgroundColor:red[500],height:80,width:80},partyOnGrid:{marginTop:10},messageWrap:{padding:10},messageContainer:{backgroundColor:\"rgba(0,0,0,0.38)\",borderRadius:10},mainAvatar:{height:60,width:60},thisLine:{height:\"1px\",width:\"100%\",marginTop:\"2px\",backgroundColor:\"#707070\"}};});","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/Charlie2.0/client/src/Atoms/Profile/AcceptBookingCard.js"],"names":["React","useState","useRef","useContext","useEffect","makeStyles","Grid","Avatar","IconButton","ExpandMoreIcon","ExpandLessIcon","DoneIcon","CloseIcon","HelpOutlineIcon","Badge","Collapse","Typography","red","countdown","useMutation","useXsSize","UserContext","PROFILE_DATA","SEEN_BOOKING","ListTopHalf","PartyOn","BookingMessages","BookingAcceptInput","EventButtons","AcceptBookingCard","booking","classes","useStyles","xs_size_memo","md_size_memo","expanded","setExpanded","context","setContext","markBookingSeen","seenStates","handleExpandClick","seenHostHandle","variables","booking_id","_id","user","refetchQueries","query","host_id","color","console","log","event","happeningNow","seenHost","badgeContent","decided","confirmed","dotBadge","mainItem","width","backgroundColor","borderBottom","mainSolidLine","badge","picture","mainAvatar","mainHeader","name","Date","createdAt","toString","partyOnGrid","transition","transform","messageWrap","messageContainer","middleBody","margin","iconBtn","theme","marginTop","marginBottom","fontSize","marginLeft","marginRight","fontWeight","padding","height","userAvatar","borderRadius","thisLine"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useContext, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport Badge from '@material-ui/core/Badge';\n\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { red } from \"@material-ui/core/colors\";\n\nimport countdown from \"countdown\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\nimport { useXsSize } from \"src/Hooks/useXsSize\";\nimport { UserContext } from \"src/userContext\";\nimport { PROFILE_DATA } from \"src/Services/GQL/PROFILE_DATA\";\nimport { SEEN_BOOKING } from \"src/Services/GQL/SEEN_BOOKING\";\n\nimport ListTopHalf from \"src/Atoms/Play/ListTopHalf\";\nimport PartyOn from \"src/Atoms/PartyOn\";\nimport BookingMessages from \"src/Atoms/BookingMessages\";\nimport BookingAcceptInput from \"src/Atoms/BookingAcceptInput\";\nimport EventButtons from \"src/Molecules/event/EventButtons\";\n\n\nexport default function AcceptBookingCard({ booking }) {\n  const classes = useStyles();\n  const { xs_size_memo, md_size_memo } = useXsSize();\n  const [expanded, setExpanded] = useState(false);\n  const { context, setContext } = useContext(UserContext);\n  const [markBookingSeen, seenStates] = useMutation(SEEN_BOOKING);\n\n  useEffect(() => {\n    // if(context.expanded_id === booking._id){\n    //   setExpanded(true)\n    // }else{\n    //   setExpanded(false)\n    // }\n  }, [])\n\n\n  const handleExpandClick = () => {\n\n    if(expanded){\n      setExpanded(false)\n    } else{\n        setExpanded(true)\n    }\n    // seenHostHandle()\n  };\n\n  const seenHostHandle = () => {\n    markBookingSeen({\n      variables: {\n        booking_id: booking._id,\n        user: false,\n      },\n      refetchQueries: () => [\n        {\n          query: PROFILE_DATA,\n          variables: { host_id: context._id }\n        }\n      ]\n    });\n  };\n\n\n  \n  let color = \"transparent\"\n  console.log(\"event.happeningNow: \", booking.event.happeningNow)\n  if(booking.event.happeningNow){\n    // color = \"rgba(232,4,93,1)\"\n  }else{ if(expanded){\n      if(md_size_memo){\n        color = \"rgba(0,0,0,0.1)\"\n      } else {\n        color = \"white\" //\"rgba(0,0,0,0.05)\"\n      }\n    }else{\n      if(md_size_memo){\n          if(booking.seenHost === false){\n            color = \"rgba(0,0,0,0.1)\"\n          }\n        }else{\n            if(booking.seenHost === false){\n            color = \"white\"\n          }\n        }\n    }\n  }\n\n\nlet badgeContent \nif(booking.decided){\n    if(booking.confirmed){\n      badgeContent =  <DoneIcon fontSize=\"small\" />\n    } else {\n      badgeContent =  <CloseIcon fontSize=\"small\" /> //\"rgba(0,0,0,0.05)\"\n    }\n  } else {\n    badgeContent = <HelpOutlineIcon fontSize=\"small\" className={classes.dotBadge} /> \n  }\n\n  return (\n    <Grid\n      item\n      className={classes.mainItem}\n      style={{\n        // boxShadow: expanded ? \"4px 3px 5px 0px rgba(0,0,0,0.5)\" : \"none\",\n        color: md_size_memo ? \"white\" : \"black\",\n        width: xs_size_memo ? \"100%\" : \"85%\",\n        backgroundColor: color, //expanded ? color : \"transparent\",\n        borderBottom: xs_size_memo ? \"1px solid white\" : \"2px solid lightGrey\"\n      }}\n    >\n      <Grid\n        container\n        onClick={handleExpandClick}\n        alignItems=\"center\"\n        className={classes.mainSolidLine}\n      >\n        <Grid item xs={xs_size_memo ? 3 : 2}>\n          <Grid container justify=\"center\">\n            <Grid item>\n              <IconButton aria-label=\"settings\">\n                <Badge badgeContent={badgeContent} \n                        className={classes.badge} \n                        color={booking.decided ? \"primary\" : \"secondary\"}\n                        // style={{ backgroundColor: booking.decided ? \"grey\" : \"red\"}}\n                        >\n                  <Avatar\n                    src={booking.user.picture}\n                    className={classes.mainAvatar}\n                  />\n                </Badge>\n              </IconButton>\n            </Grid>\n\n          </Grid>\n        </Grid>\n\n        <Grid item xs={xs_size_memo ? 9 : 8}>\n          <Typography\n            variant=\"body2\"\n            align=\"left\"\n            className={classes.mainHeader}\n          >\n            <b>{booking.user.name}</b> wants to join your event{\" \"}\n            <b>{booking.event.name}</b>\n          </Typography>\n          <Grid container >\n            <Grid item xs={6}>\n              <Typography\n                variant=\"body2\"\n                align=\"left\"\n                className={classes.countdown}\n              >\n                created <b>{countdown(\n                  new Date(booking.createdAt),\n                  new Date(),\n                  \"X\",\n                  1\n                ).toString()}{\" \"}\n                ago</b>\n              </Typography>\n            </Grid>\n            <Grid item xs={6} className={classes.partyOnGrid}>\n              {booking.event.happeningNow && <PartyOn />}\n            </Grid>\n          </Grid>\n        </Grid>\n\n        {!xs_size_memo && (\n          <Grid item xs={2}>\n            <Grid container justify=\"center\">\n              <Grid\n                item\n                style={{\n                  transition: \"transform .1s ease-in-out\",\n                  transform: expanded ? \"rotate(-180deg)\" : \"rotate(0deg)\"\n                }}\n              >\n                <IconButton aria-label=\"settings\">\n                  <ExpandMoreIcon fontSize=\"large\" />\n                </IconButton>\n              </Grid>\n            </Grid>\n          </Grid>\n        )}\n      </Grid>\n      <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n        <Grid container justify=\"center\" className={classes.messageWrap}>\n          <Grid item>\n            <Grid container className={classes.messageContainer}>\n                <BookingMessages booking={booking} />\n                <BookingAcceptInput booking={booking} />\n           \n            </Grid>    \n          </Grid>\n        </Grid>\n        <Grid container className={classes.middleBody}>\n          <ListTopHalf event={booking.event} transparent={true} context={context} />\n        </Grid>\n        <EventButtons event={booking.event} />\n        <Grid container justify=\"center\">\n          <Grid item style={{margin: 5}}>\n            <IconButton aria-label=\"settings\" className={classes.iconBtn} onClick={handleExpandClick}>\n              <ExpandLessIcon />\n            </IconButton>\n          </Grid>\n        </Grid>\n      </Collapse>\n    </Grid>\n  );\n}\n\nconst useStyles = makeStyles(theme => ({\n  mainItem: {\n    // borderRadius: 15,\n    // borderBottom: \"3px solid white\" //#707070\n    // margin: 10,\n    // padding: 10\n  },\n  mainSolidLine: {\n    marginTop: 10,\n    marginBottom: 20\n  },\n  middleBody: {},\n  mainHeader: {\n    fontSize: 16,\n    marginLeft: 20,\n    marginRight: 20\n  },\n  countdown: {\n    marginTop: 10,\n    fontWeight: 400,\n    color: \"grey\",\n    marginLeft: 20\n  },\n  badge: {\n    padding: '0 important'\n  },\n  dotBadge: {\n    height: 15,\n    width: 15\n  },\n  userAvatar: {\n    backgroundColor: red[500],\n    height: 80,\n    width: 80\n  },\n  partyOnGrid: {\n    marginTop: 10\n  },\n  messageWrap: {\n    padding: 10\n  },\n  \n  messageContainer: {\n    backgroundColor: \"rgba(0,0,0,0.38)\",\n    borderRadius: 10\n  },\n  mainAvatar: {\n    height: 60,\n    width: 60\n  },\n\n  thisLine: {\n    height: \"1px\",\n    width: \"100%\",\n    marginTop: \"2px\",\n    backgroundColor: \"#707070\"\n  }\n}));\n"]},"metadata":{},"sourceType":"module"}