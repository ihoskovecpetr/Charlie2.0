{"ast":null,"code":"import _slicedToArray from \"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/src/Pages/Event.js\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { withRouter, useHistory, NavLink } from \"react-router-dom\";\nimport { useMutation, useQuery } from \"@apollo/react-hooks\";\nimport Gallery from \"react-grid-gallery\";\nimport { displayDate } from \"../Services/transform-services\";\nimport { UserContext } from \"../userContext\";\nimport PlayPageList from \"../Molecules/play/PlayPageList\";\nimport PlayPageGallery from \"../Molecules/play/PlayPageGallery\";\nimport PlayPageMap from \"../Molecules/play/PlayPageMap\";\nimport { GET_ONE_EVENT } from \"src/Services/GQL/GET_ONE_EVENT\";\nimport { EVENT_RATINGS } from \"src/Services/GQL/EVENT_RATINGS\";\nimport ModalLayout from \"../Layouts/ModalLayout\";\nimport EventButtons from \"../Molecules/event/EventButtons\";\nimport RatingCard from \"../Molecules/rating-card\";\nimport Spinner from \"../Atoms/Spinner\";\nlet dataMock;\n\nfunction Event(props) {\n  const classes = useStyles();\n\n  const _useState = useState(0),\n        _useState2 = _slicedToArray(_useState, 2),\n        windowHeight = _useState2[0],\n        setWindowHeight = _useState2[1];\n\n  const _useQuery = useQuery(GET_ONE_EVENT, {\n    variables: {\n      event_id: props.match.params.id\n    }\n  }),\n        loading = _useQuery.loading,\n        error = _useQuery.error,\n        data = _useQuery.data,\n        refetch = _useQuery.refetch;\n\n  const ratings = useQuery(EVENT_RATINGS, {\n    variables: {\n      event_id: props.match.params.id\n    }\n  });\n  console.log(\"Event modal print\");\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    setWindowHeight(window.innerHeight);\n  }, []);\n  useEffect(() => {\n    if (document.getElementById(\"paper_scrollable\")) {\n      document.getElementById(\"paper_scrollable\").addEventListener(\"scroll\", () => {\n        console.log(\"Parent scroll\");\n      });\n    }\n  });\n  let dataDB;\n\n  const PaperEvent = props => {\n    return React.createElement(Paper, {\n      className: classes.paper,\n      style: {\n        marginTop: window.eventId ? \"8vh\" : \"10vh\",\n        height: 0.85 * windowHeight\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, props.children);\n  };\n\n  if (dataMock) {\n    dataDB = dataMock;\n  } else if (data) {\n    dataDB = data;\n  }\n\n  if (dataDB && dataDB.getOneEvent.success) {\n    return React.createElement(ModalLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"paper_scrollable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(PaperEvent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      justify: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      className: classes.nameGrid,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, dataDB.getOneEvent.hide && React.createElement(Typography, {\n      component: \"h3\",\n      variant: \"h3\",\n      className: classes.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"CANCELLED\")), React.createElement(PlayPageGallery, {\n      event: dataDB.getOneEvent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(PlayPageList, {\n      event: dataDB.getOneEvent,\n      bookings: dataDB.getOneEvent.bookings,\n      GQL_refetch: GET_ONE_EVENT,\n      refetchVariables: {\n        id: props.match.params.id\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(PlayPageMap, {\n      event: dataDB.getOneEvent,\n      showBookings: dataDB.getOneEvent.bookings //showBookings\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      container: true,\n      justify: \"center\",\n      alignItems: \"center\",\n      alignContent: \"center\",\n      direction: \"column\",\n      className: classes.ratingContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, ratings.data && ratings.data.showRatings.map((rating, index) => React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(RatingCard, {\n      rating: rating,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })))), React.createElement(EventButtons, {\n      event: dataDB && dataDB.getOneEvent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    })))));\n  }\n\n  if (dataDB && dataDB.getOneEvent.success == false) {\n    return React.createElement(ModalLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(PaperEvent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: () => {\n        props.history.goBack();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Back\"), React.createElement(Paper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      component: \"div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, dataDB.getOneEvent.message))));\n  }\n\n  return React.createElement(ModalLayout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, React.createElement(PaperEvent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    alignItems: \"center\",\n    style: {\n      width: \"100%\",\n      height: 300\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, React.createElement(Spinner, {\n    height: 100,\n    width: 100,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  })))));\n  ;\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    background: \"#242323\",\n    color: \"white\",\n    overflow: \"scroll\",\n    borderBottomRightRadius: 0,\n    borderBottomLeftRadius: 0\n  },\n  gridButtons: {\n    background: \"black\",\n    color: \"white\",\n    marginTop: \"0 !important\",\n    //padding: theme.spacing(3, 2),\n    display: \"flex\",\n    //width: 300,\n    overflow: \"scroll\",\n    borderBottomRightRadius: 5,\n    borderBottomLeftRadius: 5,\n    boxShadow: \"0px -2px 5px 0px rgba(200,200,200,0.3)\"\n  },\n  closeButton: {\n    background: theme.palette.violetova,\n    color: \"white\"\n  },\n  nameGrid: {\n    margin: 15\n  },\n  name: {\n    textAlign: \"center\"\n  },\n  thisLineHeader: {\n    height: '1px',\n    width: '100%',\n    marginTop: '2px',\n    backgroundColor: \"#707070\"\n  },\n  galleryGrid: {\n    width: \"100%\",\n    background: \"rgba(255,255,255,0.2)\",\n    borderRadius: 4,\n    padding: theme.spacing(3, 2)\n  },\n  listRow: {\n    width: '100%',\n    marginTop: 2,\n    marginBottom: 2,\n    backgroundColor: \"rgba(255,255,255,0.05)\"\n  },\n  standardHeading: {\n    width: '100%',\n    fontWeight: 500,\n    textAlign: 'left',\n    backgroundColor: \"rgba(255,255,255,0.05)\",\n    padding: 10,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  },\n  standardContent: {\n    fontWeight: 400,\n    textAlign: 'right',\n    color: '#29FFF7',\n    padding: 10\n  },\n  authorContainer: {\n    width: \"100%\"\n  },\n  ratingContainer: {\n    width: \"100%\",\n    overflow: \"scroll\"\n  }\n}));\nexport default withRouter(Event);","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/Charlie2.0/client/src/Pages/Event.js"],"names":["React","useState","useContext","useEffect","CssBaseline","makeStyles","useTheme","Button","Container","Grid","Paper","Typography","Box","Avatar","withRouter","useHistory","NavLink","useMutation","useQuery","Gallery","displayDate","UserContext","PlayPageList","PlayPageGallery","PlayPageMap","GET_ONE_EVENT","EVENT_RATINGS","ModalLayout","EventButtons","RatingCard","Spinner","dataMock","Event","props","classes","useStyles","windowHeight","setWindowHeight","variables","event_id","match","params","id","loading","error","data","refetch","ratings","console","log","window","scrollTo","innerHeight","document","getElementById","addEventListener","dataDB","PaperEvent","paper","marginTop","eventId","height","children","getOneEvent","success","nameGrid","hide","name","bookings","ratingContainer","showRatings","map","rating","index","history","goBack","message","width","theme","background","color","overflow","borderBottomRightRadius","borderBottomLeftRadius","gridButtons","display","boxShadow","closeButton","palette","violetova","margin","textAlign","thisLineHeader","backgroundColor","galleryGrid","borderRadius","padding","spacing","listRow","marginBottom","standardHeading","fontWeight","whiteSpace","textOverflow","standardContent","authorContainer"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Avatar from \"@material-ui/core/Avatar\";\n\nimport { withRouter, useHistory, NavLink } from \"react-router-dom\";\nimport { useMutation, useQuery } from \"@apollo/react-hooks\";\nimport Gallery from \"react-grid-gallery\";\nimport { displayDate } from \"../Services/transform-services\";\n\nimport { UserContext } from \"../userContext\";\n\nimport PlayPageList from \"../Molecules/play/PlayPageList\";\nimport PlayPageGallery from \"../Molecules/play/PlayPageGallery\";\nimport PlayPageMap from \"../Molecules/play/PlayPageMap\";\n\nimport {GET_ONE_EVENT} from \"src/Services/GQL/GET_ONE_EVENT\";\nimport { EVENT_RATINGS } from \"src/Services/GQL/EVENT_RATINGS\";\nimport ModalLayout from \"../Layouts/ModalLayout\";\nimport EventButtons from \"../Molecules/event/EventButtons\";\nimport RatingCard from \"../Molecules/rating-card\";\nimport Spinner from \"../Atoms/Spinner\";\n\n\nlet dataMock;\n\nfunction Event(props) {\n  const classes = useStyles();\n  const [windowHeight, setWindowHeight] = useState(0);\n  const { loading, error, data, refetch } = useQuery(GET_ONE_EVENT, {\n    variables: { event_id: props.match.params.id }\n  });\n  const ratings = useQuery(EVENT_RATINGS, {\n    variables: { event_id: props.match.params.id }\n  });\n\n  console.log(\"Event modal print\")\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    setWindowHeight(window.innerHeight)\n  }, []);\n\n  useEffect(() => {\n    if (document.getElementById(\"paper_scrollable\")) {\n      document\n        .getElementById(\"paper_scrollable\")\n        .addEventListener(\"scroll\", () => {\n          console.log(\"Parent scroll\");\n        });\n    }\n  });\n\n  let dataDB;\n\n  const PaperEvent = props => {\n    return <Paper \n                  className={classes.paper}\n                  style={{marginTop: window.eventId ? \"8vh\" : \"10vh\", height: 0.85 * windowHeight}}\n                  >\n              {props.children}\n          </Paper>;\n  };\n\n\n  if (dataMock) {\n    dataDB = dataMock;\n  } else if (data) {\n    dataDB = data;\n  }\n\n\n  if (dataDB && dataDB.getOneEvent.success) {\n    return (\n      <ModalLayout>\n        <div id=\"paper_scrollable\">\n          <PaperEvent>\n\n\n            <Grid\n              container\n              justify=\"center\"\n            >\n              <Grid item className={classes.nameGrid}>\n                {/* <Typography component=\"h4\" variant=\"h4\" className={classes.name}>\n                  {dataDB.getOneEvent.name}\n                  <p className={classes.thisLineHeader}></p>\n                </Typography> */}\n                {dataDB.getOneEvent.hide && <Typography component=\"h3\" variant=\"h3\" className={classes.name}>\n                  CANCELLED\n                </Typography>}\n              </Grid>\n              <PlayPageGallery event={dataDB.getOneEvent} />\n              <PlayPageList\n                    event={dataDB.getOneEvent}\n                    bookings={dataDB.getOneEvent.bookings}\n                    GQL_refetch={GET_ONE_EVENT}\n                    refetchVariables={{ id: props.match.params.id }}\n                  />\n              <PlayPageMap\n                    event={dataDB.getOneEvent}\n                    showBookings={dataDB.getOneEvent.bookings} //showBookings\n                  /> \n\n              <Grid\n                container\n                justify=\"center\"\n                alignItems=\"center\"\n                alignContent=\"center\"\n                direction=\"column\"\n                className={classes.ratingContainer}\n              >\n                {ratings.data &&\n                  ratings.data.showRatings.map((rating, index) => (\n                    <Grid item>\n                      <RatingCard rating={rating} key={index} />\n                    </Grid>\n                  ))}\n              </Grid>\n              <EventButtons\n                event={dataDB && dataDB.getOneEvent}\n              />\n            </Grid>\n          </PaperEvent>\n        </div>\n        {/* <Grid\n          container\n          direction=\"row\"\n          justify=\"center\"\n          alignItems=\"center\"\n          alignContent=\"center\"\n          className={classes.gridButtons}\n        >\n          <EventButtons\n            event={dataDB && dataDB.getOneEvent}\n            bookings={dataDB && dataDB.getOneEvent.bookings}\n            createBooking={createBooking}\n            cancelBooking={cancelBooking}\n            deleteOneEvent={deleteOneEvent}\n            eventId={props.match.params.id}\n            ONE_EVENT={GET_ONE_EVENT}\n            EVENT_RATINGS={EVENT_RATINGS}\n            className={classes.eventButtons}\n          />\n\n        </Grid> */}\n      </ModalLayout>\n    );\n  }\n  if (dataDB && dataDB.getOneEvent.success == false) {\n    return (\n      <ModalLayout>\n        <PaperEvent>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => {\n              props.history.goBack();\n            }}\n          >\n            Back\n          </Button>\n          <Paper>\n            <Typography component=\"div\">\n              {dataDB.getOneEvent.message}\n            </Typography>\n          </Paper>\n        </PaperEvent>\n      </ModalLayout>\n    );\n  }\n  return(\n    <ModalLayout>\n      <PaperEvent>\n          <Grid container justify=\"center\" alignItems=\"center\" style={{width: \"100%\", height: 300}}>\n            <Grid item>\n              <Spinner height={100} width={100} />\n            </Grid>\n          </Grid>\n      </PaperEvent>\n    </ModalLayout>\n  );;\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    background: \"#242323\",\n    color: \"white\",\n    overflow: \"scroll\",\n    borderBottomRightRadius: 0,\n    borderBottomLeftRadius: 0\n  },\n  gridButtons: {\n    background: \"black\",\n    color: \"white\",\n    marginTop: \"0 !important\",\n    //padding: theme.spacing(3, 2),\n    display: \"flex\",\n    //width: 300,\n    overflow: \"scroll\",\n    borderBottomRightRadius: 5,\n    borderBottomLeftRadius: 5,\n    boxShadow: \"0px -2px 5px 0px rgba(200,200,200,0.3)\"\n  },\n  closeButton: {\n    background: theme.palette.violetova,\n    color: \"white\"\n  },\n  nameGrid: {\n    margin: 15\n  },\n  name: {\n    textAlign: \"center\"\n  },\n  thisLineHeader:{\n    height: '1px',\n    width: '100%',\n    marginTop: '2px',\n    backgroundColor: \"#707070\"\n  },\n  galleryGrid: {\n    width: \"100%\",\n    background: \"rgba(255,255,255,0.2)\",\n    borderRadius: 4,\n    padding: theme.spacing(3, 2)\n  },\n  listRow:{\n    width: '100%',\n    marginTop: 2,\n    marginBottom: 2,\n    backgroundColor: \"rgba(255,255,255,0.05)\",\n  },\n  standardHeading: {\n    width: '100%',\n    fontWeight: 500,\n    textAlign: 'left',\n    backgroundColor: \"rgba(255,255,255,0.05)\",\n    padding: 10,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n  standardContent: {\n    fontWeight: 400,\n    textAlign: 'right',\n    color: '#29FFF7',\n    padding: 10\n  },\n  authorContainer: {\n    width: \"100%\"\n  },\n  ratingContainer: {\n    width: \"100%\",\n    overflow: \"scroll\"\n  },\n}));\n\nexport default withRouter(Event);\n"]},"metadata":{},"sourceType":"module"}