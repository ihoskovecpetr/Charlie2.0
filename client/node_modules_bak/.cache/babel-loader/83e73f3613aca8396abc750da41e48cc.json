{"ast":null,"code":"import _defineProperty from \"/Users/petrhoskovec/Desktop/code/Charlie2.0-renew/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/petrhoskovec/Desktop/code/Charlie2.0-renew/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/petrhoskovec/Desktop/code/Charlie2.0-renew/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/petrhoskovec/Desktop/code/Charlie2.0-renew/Charlie2.0/client/src/Pages/Profile.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Badge from \"@material-ui/core/Badge\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport SwipeableViews from \"react-swipeable-views\";\nimport { useMutation, useQuery } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nimport { UserContext } from \"../userContext\";\nimport { sortByDate } from \"../Services/functions\";\nimport { useXsSize } from \"../Hooks/useXsSize\";\nimport { PROFILE_DATA } from \"src/Services/GQL/PROFILE_DATA\";\nimport Copyright from \"../Atoms/copyright\";\nimport Spinner from \"../Atoms/Spinner\";\nimport RatingCardNew from \"../Atoms/Profile/RatingCardNew\";\nimport ProfileTopBox from \"../Molecules/profile/ProfileTopBox\";\nimport ProfileBookingsPrinter from \"src/Molecules/profile/ProfileBookingsPrinter\";\nimport ProfileEventsPrinter from \"src/Molecules/profile/ProfileEventsPrinter\";\n\nfunction TabPanel(props) {\n  const children = props.children,\n        value = props.value,\n        index = props.index,\n        other = _objectWithoutProperties(props, [\"children\", \"value\", \"index\"]);\n\n  return React.createElement(Typography, Object.assign({\n    component: \"div\",\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: \"full-width-tabpanel-\".concat(index),\n    \"aria-labelledby\": \"full-width-tab-\".concat(index)\n  }, other, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }), value === index && React.createElement(Box, {\n    p: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, children));\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: \"full-width-tab-\".concat(index),\n    \"aria-controls\": \"full-width-tabpanel-\".concat(index)\n  };\n}\n\nfunction Profile() {\n  const classes = useStyles();\n  const theme = useTheme();\n\n  const _useContext = useContext(UserContext),\n        context = _useContext.context,\n        setContext = _useContext.setContext;\n\n  const _useState = useState(0),\n        _useState2 = _slicedToArray(_useState, 2),\n        value = _useState2[0],\n        setValue = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        bookingsArray = _useState4[0],\n        setBookingsArray = _useState4[1];\n\n  const _useState5 = useState(0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        countUnseenBookings = _useState6[0],\n        setCountUnseenBookings = _useState6[1];\n\n  const _useXsSize = useXsSize(),\n        xs_size_memo = _useXsSize.xs_size_memo,\n        md_size_memo = _useXsSize.md_size_memo;\n\n  const _useQuery = useQuery(PROFILE_DATA, {\n    variables: {\n      host_id: context._id\n    },\n    fetchPolicy: \"network-only\"\n  }),\n        loading = _useQuery.loading,\n        error = _useQuery.error,\n        data = _useQuery.data; // const hostingStates = useQuery(USER_EVENTS, {\n  //   variables: { user_id: user._id }\n  // });\n  // const bookingStates = useQuery(USER_BOOKING, {\n  //   variables: { user_id: user._id }\n  // });\n\n\n  useEffect(() => {\n    document.documentElement.style.overflow = \"auto\"; // window.scrollTo(0, 0);\n\n    return () => {};\n  }, []);\n\n  const trsfmFeed = (events, type) => {\n    return events.map(item => _objectSpread({}, item, {\n      type: type\n    }));\n  };\n\n  useEffect(() => {\n    if (data) {\n      let showUserBookings = data.showUserBookings,\n          showHostBookings = data.showHostBookings;\n      const transformedBookingsArr = [...trsfmFeed(showUserBookings, \"yourBooking\"), ...trsfmFeed(showHostBookings, \"askForJoin\")];\n      const sortedFeed = sortByDate(transformedBookingsArr, \"createdAt\", \"DESC\");\n      setBookingsArray(sortedFeed);\n    }\n  }, [data]);\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  const handleChangeIndex = index => {\n    setValue(index);\n  };\n\n  return React.createElement(\"div\", {\n    className: classes.profileWrap,\n    id: \"profile_wrap\",\n    style: {\n      overflow: \"hidden\",\n      color: md_size_memo ? \"white\" : \"black\",\n      background: md_size_memo ? \"linear-gradient(90deg, rgba(29,47,94,1) 0%, rgba(104,81,123,1) 100%)\" : null\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(Container, {\n    maxWidth: \"md\",\n    style: {\n      padding: 0,\n      paddingTop: md_size_memo ? 0 : 80\n    },\n    className: classes.profileContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    spacing: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    md: 4,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(ProfileTopBox, {\n    errorQuery: error,\n    showRatings: data && data.showRatings,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  })), React.createElement(Grid, {\n    item: true,\n    md: 8,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(AppBar, {\n    position: \"static\",\n    color: \"primary\",\n    className: classes.appBar,\n    classes: {\n      colorPrimary: classes.colorPrimary\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(Tabs, {\n    value: value,\n    onChange: handleChange,\n    indicatorColor: \"primary\",\n    textColor: \"primary\",\n    variant: \"fullWidth\",\n    \"aria-label\": \"full width tabs example\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, React.createElement(Tab, Object.assign({\n    label: React.createElement(Badge, {\n      color: \"secondary\",\n      badgeContent: context.countUnseenBookings,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"BOOKINGS\")\n  }, a11yProps(1), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  })), React.createElement(Tab, Object.assign({\n    label: React.createElement(Badge, {\n      color: \"primary\",\n      badgeContent: data && data.showUserBookings && data.showUserBookings.length + data.userEvents.length,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"EVENTS\")\n  }, a11yProps(2), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  })), React.createElement(Tab, Object.assign({\n    label: React.createElement(Badge, {\n      color: \"secondary\",\n      badgeContent: context.countUnseenRatings,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"RATINGS\")\n  }, a11yProps(3), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  })))), React.createElement(SwipeableViews, {\n    axis: theme.direction === \"rtl\" ? \"x-reverse\" : \"x\",\n    index: value,\n    onChangeIndex: handleChangeIndex,\n    style: {\n      width: \"100%\",\n      padding: 0\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, React.createElement(TabPanel, {\n    value: value,\n    index: 0,\n    dir: theme.direction,\n    style: {\n      padding: 0\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, loading && React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }, React.createElement(Spinner, {\n    height: 100,\n    width: 100,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }))), bookingsArray && bookingsArray.map((booking, index) => React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    alignItems: \"center\",\n    alignContent: \"center\",\n    style: {\n      width: \"100%\",\n      padding: 0\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    key: index,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, React.createElement(ProfileBookingsPrinter, {\n    booking: booking,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222\n    },\n    __self: this\n  }))))), React.createElement(TabPanel, {\n    value: value,\n    index: 1,\n    dir: theme.direction,\n    className: classes.tabPanel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }, loading && React.createElement(Spinner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235\n    },\n    __self: this\n  }), data && React.createElement(ProfileEventsPrinter, {\n    showUserBookings: data.showUserBookings,\n    userEvents: data.userEvents,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236\n    },\n    __self: this\n  })), React.createElement(TabPanel, {\n    value: value,\n    index: 2,\n    dir: theme.direction,\n    className: classes.tabPanel,\n    style: {\n      width: \"100%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241\n    },\n    __self: this\n  }, loading && React.createElement(Spinner, {\n    height: 100,\n    width: 100,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }), data && data.showRatings && data.showRatings.map((rating, index) => React.createElement(React.Fragment, null, React.createElement(RatingCardNew, {\n    rating: rating,\n    key: index,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253\n    },\n    __self: this\n  }))))))), React.createElement(Box, {\n    mt: 8,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261\n    },\n    __self: this\n  }, React.createElement(Copyright, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262\n    },\n    __self: this\n  }))));\n}\n\nconst useStyles = makeStyles(theme => ({\n  profileWrap: {\n    top: 0,\n    width: \"100%\",\n    minHeight: \"100vh\",\n    position: \"absolute\",\n    background: \"#F2F2F2\" // background:\n    //   \"linear-gradient(90deg, rgba(29,47,94,1) 0%, rgba(103,80,122,1) 100%)\"\n\n  },\n  profileContainer: {\n    top: 0\n  },\n  appBar: {\n    zIndex: 1,\n    color: \"white !important\",\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\"\n  },\n  tabPanel: {\n    minHeight: \"100vh\",\n    width: \"100%\"\n  },\n  colorPrimary: {\n    color: \"white !important\",\n    backgroundColor: \"transparent\"\n  }\n}));\nexport default Profile;","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/Charlie2.0-renew/Charlie2.0/client/src/Pages/Profile.js"],"names":["React","useState","useContext","useEffect","PropTypes","Container","Grid","AppBar","Tabs","Tab","Badge","Box","Typography","makeStyles","useTheme","SwipeableViews","useMutation","useQuery","gql","UserContext","sortByDate","useXsSize","PROFILE_DATA","Copyright","Spinner","RatingCardNew","ProfileTopBox","ProfileBookingsPrinter","ProfileEventsPrinter","TabPanel","props","children","value","index","other","propTypes","node","any","isRequired","a11yProps","id","Profile","classes","useStyles","theme","context","setContext","setValue","bookingsArray","setBookingsArray","countUnseenBookings","setCountUnseenBookings","xs_size_memo","md_size_memo","variables","host_id","_id","fetchPolicy","loading","error","data","document","documentElement","style","overflow","trsfmFeed","events","type","map","item","showUserBookings","showHostBookings","transformedBookingsArr","sortedFeed","handleChange","event","newValue","handleChangeIndex","profileWrap","color","background","padding","paddingTop","profileContainer","showRatings","appBar","colorPrimary","length","userEvents","countUnseenRatings","direction","width","booking","tabPanel","rating","top","minHeight","position","zIndex","backgroundColor","boxShadow"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Badge from \"@material-ui/core/Badge\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\n\nimport SwipeableViews from \"react-swipeable-views\";\nimport { useMutation, useQuery } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\n\nimport { UserContext } from \"../userContext\";\nimport { sortByDate } from \"../Services/functions\";\nimport { useXsSize } from \"../Hooks/useXsSize\";\nimport { PROFILE_DATA } from \"src/Services/GQL/PROFILE_DATA\";\n\nimport Copyright from \"../Atoms/copyright\";\nimport Spinner from \"../Atoms/Spinner\";\nimport RatingCardNew from \"../Atoms/Profile/RatingCardNew\";\nimport ProfileTopBox from \"../Molecules/profile/ProfileTopBox\";\nimport ProfileBookingsPrinter from \"src/Molecules/profile/ProfileBookingsPrinter\"\nimport ProfileEventsPrinter from \"src/Molecules/profile/ProfileEventsPrinter\";\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box p={3}>{children}</Box>}\n    </Typography>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `full-width-tab-${index}`,\n    \"aria-controls\": `full-width-tabpanel-${index}`\n  };\n}\n\nfunction Profile() {\n  const classes = useStyles();\n  const theme = useTheme();\n  const { context, setContext } = useContext(UserContext);\n  const [value, setValue] = useState(0);\n  const [bookingsArray, setBookingsArray] = useState([]);\n  const [countUnseenBookings, setCountUnseenBookings] = useState(0);\n  const { xs_size_memo, md_size_memo } = useXsSize();\n  const { loading, error, data } = useQuery(PROFILE_DATA, {\n    variables: { host_id: context._id },\n    fetchPolicy: \"network-only\"\n  });\n  // const hostingStates = useQuery(USER_EVENTS, {\n  //   variables: { user_id: user._id }\n  // });\n  // const bookingStates = useQuery(USER_BOOKING, {\n  //   variables: { user_id: user._id }\n  // });\n  useEffect(() => {\n    document.documentElement.style.overflow = \"auto\";\n    // window.scrollTo(0, 0);\n    return () => {};\n  }, []);\n\n  const trsfmFeed = (events, type) => {\n    return events.map(item => ({ ...item, type: type }));\n  };\n\n  useEffect(() => {\n\n    if (data) {\n      let {\n        showUserBookings,\n        showHostBookings\n      } = data;\n\n      const transformedBookingsArr = [\n        ...trsfmFeed(showUserBookings, \"yourBooking\"),\n        ...trsfmFeed(showHostBookings, \"askForJoin\")\n      ];\n\n      const sortedFeed = sortByDate(transformedBookingsArr, \"createdAt\", \"DESC\");\n\n      setBookingsArray(sortedFeed);\n\n    }\n  }, [data]);\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  const handleChangeIndex = index => {\n    setValue(index);\n  };\n\n  return (\n    <div\n      className={classes.profileWrap}\n      id=\"profile_wrap\"\n      style={{\n        overflow: \"hidden\",\n        color: md_size_memo ? \"white\" : \"black\",\n        background: md_size_memo\n          ? \"linear-gradient(90deg, rgba(29,47,94,1) 0%, rgba(104,81,123,1) 100%)\"\n          : null\n      }}\n    >\n      <Container\n        maxWidth=\"md\"\n        style={{ padding: 0, paddingTop: md_size_memo ? 0 : 80 }}\n        className={classes.profileContainer}\n      >\n        <Grid container justify=\"center\" spacing={2}>\n          <Grid item md={4} xs={12}>\n            <ProfileTopBox errorQuery={error} showRatings={data && data.showRatings} />\n          </Grid>\n          <Grid item md={8} xs={12}>\n            <AppBar\n              position=\"static\"\n              color=\"primary\"\n              className={classes.appBar}\n              classes={{\n                colorPrimary: classes.colorPrimary\n              }}\n            >\n              <Tabs\n                value={value}\n                onChange={handleChange}\n                indicatorColor=\"primary\"\n                textColor=\"primary\"\n                variant=\"fullWidth\"\n                aria-label=\"full width tabs example\"\n              >\n                <Tab\n                  label={\n                    <Badge\n                      color=\"secondary\"\n                      badgeContent={context.countUnseenBookings}\n                    >\n                      BOOKINGS\n                    </Badge>\n                  }\n                  {...a11yProps(1)}\n                />\n                <Tab\n                  label={\n                    <Badge\n                      color=\"primary\"\n                      badgeContent={                       \n                        data &&\n                        data.showUserBookings &&\n                        data.showUserBookings.length + data.userEvents.length\n                      }\n                    >\n                      EVENTS\n                    </Badge>\n                  }\n                  {...a11yProps(2)}\n                />\n\n                <Tab\n                  label={\n                    <Badge\n                      color=\"secondary\"\n                      badgeContent={context.countUnseenRatings}\n                    >\n                      RATINGS\n                    </Badge>\n                  }\n                  {...a11yProps(3)}\n                />\n              </Tabs>\n            </AppBar>\n            <SwipeableViews\n              axis={theme.direction === \"rtl\" ? \"x-reverse\" : \"x\"}\n              index={value}\n              onChangeIndex={handleChangeIndex}\n              style={{ width: \"100%\", padding: 0 }}\n            >\n              {/* TAB PANEL 1 */}\n              <TabPanel\n                value={value}\n                index={0}\n                dir={theme.direction}\n                style={{ padding: 0 }}\n              >\n                    {loading && (\n                      <Grid container justify=\"center\">\n                        <Grid item>\n                          <Spinner height={100} width={100} />\n                        </Grid>\n                      </Grid>\n                    )}\n                  {bookingsArray && bookingsArray.map((booking, index) => (\n                    <Grid\n                      container\n                      justify=\"center\"\n                      alignItems=\"center\"\n                      alignContent=\"center\"\n                      style={{ width: \"100%\", padding: 0 }}>\n                          <Grid item xs={12} key={index}>\n                            <ProfileBookingsPrinter\n                              booking={booking}\n                            />\n                          </Grid>\n                      </Grid>\n                  ))}\n              </TabPanel>\n              {/* TAB PANEL 2 */}\n              <TabPanel \n                  value={value} \n                  index={1} \n                  dir={theme.direction}\n                  className={classes.tabPanel}>\n                    {loading && <Spinner />}\n                    {data && <ProfileEventsPrinter \n                                  showUserBookings={data.showUserBookings} \n                                  userEvents={data.userEvents} />}\n              </TabPanel>\n              {/* TAB PANEL 3 */}\n              <TabPanel\n                value={value}\n                index={2}\n                dir={theme.direction}\n                className={classes.tabPanel}\n                style={{ width: \"100%\" }}\n              >\n                {loading && <Spinner height={100} width={100} />}\n                {data &&\n                  data.showRatings &&\n                  data.showRatings.map((rating, index) => (\n                    <>\n                      <RatingCardNew rating={rating} key={index} />\n                    </>\n                  ))}\n              </TabPanel>\n            </SwipeableViews>\n          </Grid>\n        </Grid>\n\n        <Box mt={8}>\n          <Copyright />\n        </Box>\n      </Container>\n    </div>\n  );\n}\nconst useStyles = makeStyles(theme => ({\n  profileWrap: {\n    top: 0,\n    width: \"100%\",\n    minHeight: \"100vh\",\n    position: \"absolute\",\n    background: \"#F2F2F2\"\n    // background:\n    //   \"linear-gradient(90deg, rgba(29,47,94,1) 0%, rgba(103,80,122,1) 100%)\"\n  },\n  profileContainer: {\n    top: 0\n  },\n\n  appBar: {\n    zIndex: 1,\n    color: \"white !important\",\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\"\n  },\n  tabPanel:{\n    minHeight: \"100vh\",\n    width: \"100%\"\n  },\n  colorPrimary: {\n    color: \"white !important\",\n    backgroundColor: \"transparent\"\n  }\n}));\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}