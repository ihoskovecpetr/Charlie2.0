{"ast":null,"code":"import _defineProperty from \"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { useMutation, useQuery } from \"@apollo/react-hooks\";\nimport { UserContext } from \"../userContext\";\nimport { PROFILE_DATA } from \"src/Services/GQL/PROFILE_DATA\";\nexport function useCountUnseenBookingsRatings() {\n  const _useContext = useContext(UserContext),\n        context = _useContext.context,\n        setContext = _useContext.setContext;\n\n  const _useQuery = useQuery(PROFILE_DATA, {\n    variables: {\n      host_id: context._id\n    }\n  }),\n        loading = _useQuery.loading,\n        error = _useQuery.error,\n        data = _useQuery.data;\n\n  useEffect(() => {\n    if (data) {\n      let showRatings = data.showRatings,\n          showUserBookings = data.showUserBookings,\n          showHostBookings = data.showHostBookings;\n      let count = 0;\n      showHostBookings.map(item => {\n        if (!item.seenHost) count++;\n      });\n      showUserBookings.map(item => {\n        if (!item.seenUser) count++;\n      });\n      let countRatings = 0;\n      showRatings.map(item => {\n        if (!item.seenHost) countRatings++;\n      });\n      setContext(prev => {\n        return _objectSpread({}, prev, {\n          countUnseenBookings: count,\n          countUnseenRatings: countRatings\n        });\n      });\n    }\n  }, [data]);\n  return null;\n}","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/Charlie2.0/client/src/Hooks/useCountUnseenBookingsRatings.js"],"names":["React","useState","useContext","useEffect","useMutation","useQuery","UserContext","PROFILE_DATA","useCountUnseenBookingsRatings","context","setContext","variables","host_id","_id","loading","error","data","showRatings","showUserBookings","showHostBookings","count","map","item","seenHost","seenUser","countRatings","prev","countUnseenBookings","countUnseenRatings"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,SAAtC,QAAuD,OAAvD;AAEA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,qBAAtC;AAEA,SAASC,WAAT,QAA4B,gBAA5B;AACA,SAASC,YAAT,QAA6B,+BAA7B;AAGA,OAAO,SAASC,6BAAT,GAAyC;AAAA,sBACfN,UAAU,CAACI,WAAD,CADK;AAAA,QACvCG,OADuC,eACvCA,OADuC;AAAA,QAC9BC,UAD8B,eAC9BA,UAD8B;;AAAA,oBAEdL,QAAQ,CAACE,YAAD,EAAe;AACtDI,IAAAA,SAAS,EAAE;AAAEC,MAAAA,OAAO,EAAEH,OAAO,CAACI;AAAnB;AAD2C,GAAf,CAFM;AAAA,QAEvCC,OAFuC,aAEvCA,OAFuC;AAAA,QAE9BC,KAF8B,aAE9BA,KAF8B;AAAA,QAEvBC,IAFuB,aAEvBA,IAFuB;;AAM/Cb,EAAAA,SAAS,CAAC,MAAM;AAEf,QAAIa,IAAJ,EAAU;AAAA,UAETC,WAFS,GAKJD,IALI,CAETC,WAFS;AAAA,UAGTC,gBAHS,GAKJF,IALI,CAGTE,gBAHS;AAAA,UAITC,gBAJS,GAKJH,IALI,CAITG,gBAJS;AAOV,UAAIC,KAAK,GAAG,CAAZ;AAEED,MAAAA,gBAAgB,CAACE,GAAjB,CAAqBC,IAAI,IAAI;AAC9B,YAAG,CAACA,IAAI,CAACC,QAAT,EAAmBH,KAAK;AACtB,OAFD;AAGAF,MAAAA,gBAAgB,CAACG,GAAjB,CAAqBC,IAAI,IAAI;AAC9B,YAAG,CAACA,IAAI,CAACE,QAAT,EAAmBJ,KAAK;AACtB,OAFD;AAIF,UAAIK,YAAY,GAAG,CAAnB;AAEER,MAAAA,WAAW,CAACI,GAAZ,CAAgBC,IAAI,IAAI;AACzB,YAAG,CAACA,IAAI,CAACC,QAAT,EAAmBE,YAAY;AAC7B,OAFD;AAIAf,MAAAA,UAAU,CAACgB,IAAI,IAAI;AACpB,iCAAYA,IAAZ;AACCC,UAAAA,mBAAmB,EAAEP,KADtB;AAECQ,UAAAA,kBAAkB,EAAEH;AAFrB;AAIE,OALS,CAAV;AAMD;AACC,GA/BM,EA+BJ,CAACT,IAAD,CA/BI,CAAT;AAiCD,SAAO,IAAP;AACC","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\n\nimport { useMutation, useQuery } from \"@apollo/react-hooks\";\n\nimport { UserContext } from \"../userContext\";\nimport { PROFILE_DATA } from \"src/Services/GQL/PROFILE_DATA\";\n\n\nexport function useCountUnseenBookingsRatings() {\n\tconst { context, setContext } = useContext(UserContext);\n\tconst { loading, error, data } = useQuery(PROFILE_DATA, {\n\t  variables: { host_id: context._id }\n\t});\n\n\tuseEffect(() => {\n\n\t\tif (data) {\n\t\t  let {\n\t\t\tshowRatings,\n\t\t\tshowUserBookings,\n\t\t\tshowHostBookings\n\t\t  } = data;\n\n\t\tlet count = 0\n\n\t\t  showHostBookings.map(item => {\n\t\t\tif(!item.seenHost) count++\n\t\t  })\n\t\t  showUserBookings.map(item => {\n\t\t\tif(!item.seenUser) count++\n\t\t  })\n\n\t\tlet countRatings = 0\n\t\t\n\t\t  showRatings.map(item => {\n\t\t\tif(!item.seenHost) countRatings++\n\t\t  })\n\n\t\t  setContext(prev => {\n\t\t\treturn { ...prev, \n\t\t\t\tcountUnseenBookings: count, \n\t\t\t\tcountUnseenRatings: countRatings\n\t\t\t};\n\t\t  })\n\t\t}\n\t  }, [data]);\n\t\nreturn null\n}"]},"metadata":{},"sourceType":"module"}