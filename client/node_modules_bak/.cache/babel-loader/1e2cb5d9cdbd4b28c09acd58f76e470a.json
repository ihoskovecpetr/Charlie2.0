{"ast":null,"code":"import _slicedToArray from\"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState,useRef}from\"react\";import Grid from\"@material-ui/core/Grid\";import Paper from\"@material-ui/core/Paper\";import Box from\"@material-ui/core/Box\";import Alert from\"@material-ui/lab/Alert\";import Button from\"@material-ui/core/Button\";import CssBaseline from\"@material-ui/core/CssBaseline\";import TextField from\"@material-ui/core/TextField\";import FormControlLabel from\"@material-ui/core/FormControlLabel\";import InputLabel from\"@material-ui/core/InputLabel\";import Checkbox from\"@material-ui/core/Checkbox\";import Link from\"@material-ui/core/Link\";import Typography from\"@material-ui/core/Typography\";import CloseIcon from'@material-ui/icons/Close';import{makeStyles}from\"@material-ui/core/styles\";import{useMutation}from\"@apollo/react-hooks\";import gql from\"graphql-tag\";import{useHistory}from\"react-router-dom\";import{useWindowSize}from\"../Hooks/useWindowSize\";import{useScrollDisable}from\"../Hooks/useScrollDisable\";import{findEmpty}from\"../Services/functions\";import ModalLayout from\"../Layouts/ModalLayout\";import Copyright from\"../Atoms/copyright\";import Spinner from\"../Atoms/Spinner\";import DropzoneSignup from\"../Molecules/DropzoneSignup\";import{NEW_USER}from'src/Services/GQL/NEW_USER';// function tryLogin() {\n//   console.log(\"Mutation data: \", data);\n// }\nfunction SignUp(){var classes=useStyles();var history=useHistory();var windowSize=useWindowSize();var _useState=useState({picture:null}),_useState2=_slicedToArray(_useState,2),formValue=_useState2[0],setFormValue=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),feErrors=_useState4[0],setFEerrors=_useState4[1];var _useMutation=useMutation(NEW_USER),_useMutation2=_slicedToArray(_useMutation,2),newUser=_useMutation2[0],_useMutation2$=_useMutation2[1],loading=_useMutation2$.loading,error=_useMutation2$.error,data=_useMutation2$.data;var _ref=data?data.newUser:{dataOut:undefined},dataOut=_ref.dataOut;var _ref2=data?data.newUser:{errorOut:undefined},errorOut=_ref2.errorOut;useScrollDisable();var inputDescRef=useRef(null);useEffect(function(){window.scrollTo(0,0);},[]);var onSubmitHandler=function onSubmitHandler(e){e.preventDefault();var load={name:document.getElementById(\"name\").value==\"\"?null:document.getElementById(\"name\").value,email:document.getElementById(\"emailSignUp\").value==\"\"?null:document.getElementById(\"emailSignUp\").value,password:document.getElementById(\"password\").value==\"\"?null:document.getElementById(\"password\").value,password2:document.getElementById(\"password2\").value==\"\"?null:document.getElementById(\"password2\").value,picture:formValue.picture,description:inputDescRef.current.value?inputDescRef.current.value:null,typeDirect:true,typeSocial:false};var empty=findEmpty(load);empty=empty.map(function(item){return\"\".concat(item,\" is Empty\");});if(load.password!=load.password2)empty.push(\"Not matching passwords\");console.log(\"Empty ones: \",empty);if(empty.length==0){setFEerrors([]);// reset fe errors\nconsole.log(\"SUBMIT: \",load);newUser({variables:load});}else{setFEerrors(empty);}};if(dataOut&&dataOut.success){setTimeout(function(){history.push('/');},200);return React.createElement(ModalLayout,null,React.createElement(Paper,{className:classes.paper},React.createElement(\"p\",null,\"Succes redirecting to main page\")));}// if (loading) {\n//   return (\n//     <ModalLayout>\n//       <Paper className={classes.paper}>\n//       <Spinner height={40} width={40} />\n//       </Paper>\n//     </ModalLayout>\n//   );\n// }\nif(error){return React.createElement(ModalLayout,null,React.createElement(Paper,{className:classes.paper},React.createElement(Typography,{variant:\"h4\"},\"Error, something went wrong\"),React.createElement(Button,{variant:\"contained\",color:\"secondary\",onClick:function onClick(){history.push(\"/\");}},\"MENU\")));}if(data&&data.newUser.success==true){setTimeout(function(){history.push(\"/\");},1000);return React.createElement(ModalLayout,null,React.createElement(Paper,{className:classes.paper},React.createElement(\"p\",null,\"Success! Redirecting..\")));}return React.createElement(ModalLayout,null,React.createElement(Paper,{className:classes.paper,style:{marginTop:0.10*windowSize.height,maxHeight:0.88*windowSize.height,overflow:'scroll'}},React.createElement(CssBaseline,null),React.createElement(Grid,{container:true,justify:\"flex-end\"},React.createElement(Grid,{item:true},React.createElement(CloseIcon,{onClick:function onClick(){history.goBack();}}))),React.createElement(Grid,{container:true,justify:\"center\"},React.createElement(Grid,{item:true},React.createElement(Typography,{component:\"h1\",variant:\"h5\",className:classes.mainHeading},loading?\"Loading\":\"Sign UP\"))),React.createElement(Grid,{container:true,justify:\"center\",alignItems:\"center\",direction:\"column\",className:classes.gridDropzone},React.createElement(Grid,{item:true},React.createElement(DropzoneSignup,{setFormValue:setFormValue,formValue:formValue}))),React.createElement(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"name\",label:\"User name\",name:\"name\",variant:\"outlined\"// autoFocus\n// autocomplete=\"off\"\n}),React.createElement(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"emailSignUp\",label:\"Email Address\",name:\"email\",variant:\"outlined\"//autoComplete=\"email\"\n}),React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password2\",label:\"Password\",type:\"password\",id:\"password2\"}),React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Confirm password\",type:\"password\",id:\"password\"}),React.createElement(InputLabel,{htmlFor:\"standard-adornment-amount\"},\"DESCRIBE YOURSELF\"),React.createElement(Grid,{container:true,className:classes.descriptionContainer},React.createElement(Grid,{item:true,className:classes.descriptionItem,xs:12},React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"decsription\",placeholder:\"Hi there, I am an upcomming enterpreneur commig to the sceen, join and witness my rise.\",multiline:true,rows:\"4\",inputRef:inputDescRef//label=\"Description\"\n,name:\"decsription\"// autoComplete=\"false\" //imporvizace\n}))),React.createElement(Grid,{container:true,justify:\"center\"},feErrors&&feErrors.map(function(item){return React.createElement(Alert,{severity:\"error\",key:item},item);}),errorOut&&errorOut.map(function(item){return React.createElement(Alert,{severity:\"error\",key:item.message},item.message);})),React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,onClick:onSubmitHandler},\"Sign Up\"),React.createElement(Grid,{container:true},React.createElement(Grid,{item:true},React.createElement(Link,{href:\"#\",variant:\"body2\"})),React.createElement(Grid,{item:true,onClick:function onClick(){history.push('/signin');}},React.createElement(Link,{variant:\"body2\"},\"Already Signed up?\"))),React.createElement(Box,{mt:8},React.createElement(Copyright,null))));}// SignIn.getInitialProps = async context => {\n//   console.log(\"Sign IN INIT PROPS: CONTEXT \", context);\n//   // if (!loggedInUser.user) {\n//   //   // If not signed in, send them somewhere more useful\n//   //   redirect(context, \"/signin\");\n//   // }\n//   const { loggedInUser } = await checkLoggedIn(context.apolloClient);\n//   if (loggedInUser.user) {\n//     // Already signed in? No need to continue.\n//     // Throw them back to the main page\n//     //redirect(context, '/')\n//     console.log(\"We have User!!\", loggedInUser.user);\n//     redirect(context, \"/\");\n//   } else {\n//     console.log(\"No User :[ \");\n//   }\n//   return {};\n// };\nvar useStyles=makeStyles(function(theme){return{\"@global\":{body:{backgroundColor:theme.palette.common.white}},paper:{marginTop:\"10vh\",paddingTop:40,padding:theme.spacing(2),display:\"flex\",flexDirection:\"column\",alignItems:\"center\",height:\"88vh\",overflow:\"scroll\",paddingBottom:40},avatar:{margin:theme.spacing(4),backgroundColor:theme.palette.secondary.main,height:100,width:100},submit:{margin:theme.spacing(3,0,2)},standardHeading:{//borderBottom: \"solid 1px grey\",\n//fontWeight: 600,\n},gridDropzone:{width:\"100%\",margin:theme.spacing(3,0,2)},mainHeading:{marginTop:10}};});export default SignUp;","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/Charlie2.0/client/src/Pages/SignUp.js"],"names":["React","useContext","useEffect","useState","useRef","Grid","Paper","Box","Alert","Button","CssBaseline","TextField","FormControlLabel","InputLabel","Checkbox","Link","Typography","CloseIcon","makeStyles","useMutation","gql","useHistory","useWindowSize","useScrollDisable","findEmpty","ModalLayout","Copyright","Spinner","DropzoneSignup","NEW_USER","SignUp","classes","useStyles","history","windowSize","picture","formValue","setFormValue","feErrors","setFEerrors","newUser","loading","error","data","dataOut","undefined","errorOut","inputDescRef","window","scrollTo","onSubmitHandler","e","preventDefault","load","name","document","getElementById","value","email","password","password2","description","current","typeDirect","typeSocial","empty","map","item","push","console","log","length","variables","success","setTimeout","paper","marginTop","height","maxHeight","overflow","goBack","mainHeading","gridDropzone","descriptionContainer","descriptionItem","message","submit","theme","body","backgroundColor","palette","common","white","paddingTop","padding","spacing","display","flexDirection","alignItems","paddingBottom","avatar","margin","secondary","main","width","standardHeading"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState, useRef } from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Box from \"@material-ui/core/Box\";\n\nimport Alert from \"@material-ui/lab/Alert\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Link from \"@material-ui/core/Link\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\nimport gql from \"graphql-tag\";\nimport { useHistory } from \"react-router-dom\";\nimport { useWindowSize } from \"../Hooks/useWindowSize\";\nimport { useScrollDisable } from \"../Hooks/useScrollDisable\";\nimport { findEmpty } from \"../Services/functions\";\n\nimport ModalLayout from \"../Layouts/ModalLayout\";\nimport Copyright from \"../Atoms/copyright\";\nimport Spinner from \"../Atoms/Spinner\";\nimport DropzoneSignup from \"../Molecules/DropzoneSignup\";\nimport { NEW_USER } from 'src/Services/GQL/NEW_USER'\n\n// function tryLogin() {\n//   console.log(\"Mutation data: \", data);\n// }\n\n\nfunction SignUp() {\n  const classes = useStyles();\n  let history = useHistory();\n  const windowSize = useWindowSize();\n\n  const [formValue, setFormValue] = useState({ picture: null });\n  const [feErrors, setFEerrors] = useState([]);\n  const [newUser, { loading, error, data }] = useMutation(NEW_USER);\n\n  const { dataOut } = data ? data.newUser : { dataOut: undefined };\n  const { errorOut } = data ? data.newUser : { errorOut: undefined };\n  \n  useScrollDisable();\n  const inputDescRef = useRef(null);\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n\n\n  const onSubmitHandler = (e) => {\n    e.preventDefault();\n    let load = {\n      name: document.getElementById(\"name\").value == \"\" ? null : document.getElementById(\"name\").value,\n      email: document.getElementById(\"emailSignUp\").value == \"\" ? null : document.getElementById(\"emailSignUp\").value,\n      password: document.getElementById(\"password\").value == \"\" ? null : document.getElementById(\"password\").value,\n      password2: document.getElementById(\"password2\").value == \"\" ? null : document.getElementById(\"password2\").value,\n      picture: formValue.picture,\n      description: inputDescRef.current.value\n          ? inputDescRef.current.value\n          : null,\n      typeDirect: true,\n      typeSocial: false\n      };\n    let empty = findEmpty(load);\n    empty = empty.map(item => `${item} is Empty`)\n    if(load.password != load.password2) empty.push(\"Not matching passwords\")\n\n    console.log(\"Empty ones: \", empty);\n\n  if (empty.length == 0) {\n      setFEerrors([]) // reset fe errors\n      console.log(\"SUBMIT: \", load);\n      newUser({\n        variables: load\n      });\n  } else {\n      setFEerrors(empty);\n    }\n    \n}\n\nif (dataOut && dataOut.success) {\n  setTimeout(() => {\n    history.push('/');\n  },200)\n  return (\n    <ModalLayout>\n      <Paper className={classes.paper}>\n        <p>Succes redirecting to main page</p>\n      </Paper>\n    </ModalLayout>\n  );\n}\n\n  \n  // if (loading) {\n  //   return (\n  //     <ModalLayout>\n  //       <Paper className={classes.paper}>\n  //       <Spinner height={40} width={40} />\n  //       </Paper>\n  //     </ModalLayout>\n  //   );\n  // }\n\n  if (error) {\n    return (\n      <ModalLayout>\n        <Paper className={classes.paper}>\n          <Typography variant=\"h4\">Error, something went wrong</Typography>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            onClick={() => {\n              history.push(\"/\")\n            }}\n          >\n            MENU\n          </Button>\n        </Paper>\n      </ModalLayout>\n    );\n  }\n\n\n  if(data && data.newUser.success == true ){\n          setTimeout(() => {\n          history.push(\"/\");\n        }, 1000);\n        return (\n          <ModalLayout>\n            <Paper className={classes.paper}>\n              <p>Success! Redirecting..</p>\n            </Paper>\n          </ModalLayout>\n        );\n  }\n\n  return (\n    <ModalLayout>\n      <Paper  className={classes.paper}\n              style={{\n                marginTop: 0.10 * windowSize.height,\n                maxHeight: 0.88 * windowSize.height,\n                overflow: 'scroll'\n              }}>\n        <CssBaseline />\n      <Grid container justify='flex-end'>\n          <Grid item>\n            <CloseIcon onClick={() => {history.goBack()}} />\n          </Grid>\n        </Grid>\n      <Grid container justify=\"center\">\n        <Grid item>\n          <Typography component=\"h1\" variant=\"h5\" className={classes.mainHeading}>\n           {loading ? \"Loading\" : \"Sign UP\"}\n          </Typography>\n        </Grid>\n      </Grid>\n\n\n        \n          <Grid\n            container\n            justify=\"center\"\n            alignItems=\"center\"\n            direction=\"column\"\n            className={classes.gridDropzone}\n          >\n            <Grid item>\n              <DropzoneSignup setFormValue={setFormValue} formValue={formValue} />\n            </Grid>\n          </Grid>\n\n          <TextField\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"name\"\n            label=\"User name\"\n            name=\"name\"\n            variant='outlined'\n            // autoFocus\n            // autocomplete=\"off\"\n          />\n          <TextField\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"emailSignUp\"\n            label=\"Email Address\"\n            name=\"email\"\n            variant='outlined'\n            //autoComplete=\"email\"\n          />\n          <TextField\n            variant='outlined'\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"password2\"\n            label=\"Password\"\n            type=\"password\"\n            id=\"password2\"\n          />\n          <TextField\n            variant='outlined'\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"password\"\n            label=\"Confirm password\"\n            type=\"password\"\n            id=\"password\"\n          />\n           <InputLabel htmlFor=\"standard-adornment-amount\">\n            DESCRIBE YOURSELF\n          </InputLabel>\n          <Grid\n            container\n            className={classes.descriptionContainer}\n          >\n            <Grid item className={classes.descriptionItem} xs={12}>\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"decsription\"\n                placeholder=\"Hi there, I am an upcomming enterpreneur commig to the sceen, join and witness my rise.\"\n                multiline\n                rows=\"4\"\n                inputRef={inputDescRef}\n                //label=\"Description\"\n                name=\"decsription\"\n                // autoComplete=\"false\" //imporvizace\n              />\n            </Grid>\n          </Grid>\n          <Grid container justify=\"center\">\n          {feErrors &&\n            feErrors.map(item => (\n              <Alert severity=\"error\" key={item}>\n                {item}\n              </Alert>\n            ))}\n          {errorOut &&\n            errorOut.map(item => (\n              <Alert severity=\"error\" key={item.message}>\n                {item.message}\n              </Alert>\n            ))}\n            </Grid>\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            onClick={onSubmitHandler}\n          >\n            Sign Up\n          </Button>\n          <Grid container>\n            <Grid item>\n              <Link href=\"#\" variant=\"body2\">\n                \n              </Link>\n            </Grid>\n            <Grid item onClick={() => {history.push('/signin')}}>\n              <Link variant=\"body2\">\n                Already Signed up?\n              </Link>\n            </Grid>\n          </Grid>\n        <Box mt={8}>\n          <Copyright />\n        </Box>\n      </Paper>\n    </ModalLayout>\n  );\n}\n\n// SignIn.getInitialProps = async context => {\n//   console.log(\"Sign IN INIT PROPS: CONTEXT \", context);\n//   // if (!loggedInUser.user) {\n//   //   // If not signed in, send them somewhere more useful\n//   //   redirect(context, \"/signin\");\n//   // }\n//   const { loggedInUser } = await checkLoggedIn(context.apolloClient);\n\n//   if (loggedInUser.user) {\n//     // Already signed in? No need to continue.\n//     // Throw them back to the main page\n//     //redirect(context, '/')\n//     console.log(\"We have User!!\", loggedInUser.user);\n//     redirect(context, \"/\");\n//   } else {\n//     console.log(\"No User :[ \");\n//   }\n\n//   return {};\n// };\n\nconst useStyles = makeStyles(theme => ({\n  \"@global\": {\n    body: {\n      backgroundColor: theme.palette.common.white\n    }\n  },\n  paper: {\n    marginTop: \"10vh\",\n    paddingTop: 40,\n    padding: theme.spacing(2),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    height: \"88vh\",\n    overflow: \"scroll\",\n    paddingBottom: 40\n  },\n  avatar: {\n    margin: theme.spacing(4),\n    backgroundColor: theme.palette.secondary.main,\n    height: 100,\n    width: 100\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  },\n  standardHeading: {\n    //borderBottom: \"solid 1px grey\",\n    //fontWeight: 600,\n  },\n  gridDropzone: {\n    width: \"100%\",\n    margin: theme.spacing(3, 0, 2)\n  },\n  mainHeading: {\n    marginTop: 10\n  }\n}));\n\nexport default SignUp;\n"]},"metadata":{},"sourceType":"module"}