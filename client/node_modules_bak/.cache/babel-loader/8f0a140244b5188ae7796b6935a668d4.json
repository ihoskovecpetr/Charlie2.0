{"ast":null,"code":"import _slicedToArray from \"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/petrhoskovec/Desktop/code/Charlie2.0/client/src/Atoms/Profile/PendingBookingCard.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Badge from '@material-ui/core/Badge';\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { red } from \"@material-ui/core/colors\";\nimport countdown from \"countdown\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nimport { useXsSize } from \"../../Hooks/useXsSize\";\nimport { UserContext } from \"../../userContext\";\nimport { PROFILE_DATA } from \"src/Services/GQL/PROFILE_DATA\";\nimport { SEEN_BOOKING } from \"src/Services/GQL/SEEN_BOOKING\";\nimport PartyOn from \"src/Atoms/PartyOn\";\nimport BookingMessages from \"src/Atoms/BookingMessages\";\nimport ListTopHalf from \"src/Atoms/Play/ListTopHalf\";\nimport EventButtons from \"src/Molecules/event/EventButtons\";\nexport default function PendingBokingCard({\n  booking\n}) {\n  const classes = useStyles();\n\n  const _useXsSize = useXsSize(),\n        xs_size_memo = _useXsSize.xs_size_memo,\n        md_size_memo = _useXsSize.md_size_memo;\n\n  const _useContext = useContext(UserContext),\n        context = _useContext.context,\n        setContext = _useContext.setContext;\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        expanded = _useState2[0],\n        setExpanded = _useState2[1];\n\n  const _useMutation = useMutation(SEEN_BOOKING),\n        _useMutation2 = _slicedToArray(_useMutation, 2),\n        markBookingSeen = _useMutation2[0],\n        seenStates = _useMutation2[1];\n\n  console.log(\"Rerender PendingBokingCard: \", booking.event.name);\n  useEffect(() => {// if(context.expanded_id === booking._id){\n    //   setExpanded(true)\n    // }else{\n    //   setExpanded(false)\n    // }\n  }, []);\n\n  const handleExpandClick = () => {\n    if (expanded) {\n      setExpanded(false); // setContext(prev => {\n      //   return { ...prev, \n      //     expanded_id: null\n      //   };\n      //   })\n    } else {\n      setExpanded(true); //   setContext(prev => {\n      //     return { ...prev, \n      //       expanded_id: booking._id\n      //     };\n      // })\n    } // seenUserHandle()\n\n  };\n\n  const seenUserHandle = () => {\n    markBookingSeen({\n      variables: {\n        booking_id: booking._id,\n        user: true\n      },\n      refetchQueries: () => [{\n        query: PROFILE_DATA,\n        variables: {\n          host_id: context._id\n        }\n      }]\n    });\n  };\n\n  let color = \"transparent\";\n\n  if (expanded) {\n    if (md_size_memo) {\n      color = \"rgba(0,0,0,0.1)\";\n    } else {\n      color = \"white\"; //\"rgba(0,0,0,0.05)\"\n    }\n  } else {\n    if (md_size_memo) {\n      if (booking.seenUser === false) {\n        color = \"rgba(0,0,0,0.1)\";\n      }\n    } else {\n      if (booking.seenUser === false) {\n        color = \"white\";\n      }\n    }\n  }\n\n  let badgeContent;\n\n  if (booking.decided) {\n    if (booking.confirmed) {\n      badgeContent = React.createElement(DoneIcon, {\n        fontSize: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      });\n    } else {\n      badgeContent = React.createElement(CloseIcon, {\n        fontSize: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }); //\"rgba(0,0,0,0.05)\"\n    }\n  } else {\n    badgeContent = null; //<FiberManualRecordIcon fontSize=\"small\" className={classes.dotBadge} /> \n  }\n\n  return React.createElement(Grid, {\n    item: true,\n    className: classes.mainItem,\n    style: {\n      // boxShadow: expanded ? \"4px 3px 5px 0px rgba(0,0,0,0.5)\" : \"none\",\n      color: md_size_memo ? \"white\" : \"black\",\n      width: xs_size_memo ? \"100%\" : \"85%\",\n      backgroundColor: color,\n      //expanded ? color : \"transparent\",\n      borderBottom: xs_size_memo ? \"1px solid white\" : \"2px solid lightGrey\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    onClick: handleExpandClick,\n    alignItems: \"center\",\n    className: classes.mainSolidLine,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: xs_size_memo ? 9 : 8,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"body2\",\n    align: \"left\",\n    className: classes.mainHeader,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, \"Your\"), \" request to join\", \" \", React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, booking.event.name), \" is \", !booking.decided ? \"PENDING\" : booking.confirmed ? \"CONFIRMED\" : \"DECLINED\"), React.createElement(Grid, {\n    container: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"body2\",\n    align: \"left\",\n    className: classes.countdown,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"created \", React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, countdown(new Date(booking.createdAt), new Date(), \"X\", 1).toString(), \" \", \"ago\"))), React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    className: classes.partyOnGrid,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, booking.event.happeningNow && React.createElement(PartyOn, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  })))), React.createElement(Grid, {\n    item: true,\n    xs: xs_size_memo ? 3 : 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(IconButton, {\n    \"aria-label\": \"settings\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, React.createElement(Badge, {\n    badgeContent: badgeContent,\n    className: classes.badge,\n    color: booking.decided ? \"primary\" : \"secondary\" // style={{ backgroundColor: booking.decided ? \"grey\" : \"red\"}}\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: booking.event.imagesArr[0].thumbnail,\n    className: classes.mainAvatar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  })))))), !xs_size_memo && React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    style: {\n      transition: \"transform .1s ease-in-out\",\n      transform: expanded ? \"rotate(-180deg)\" : \"rotate(0deg)\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, React.createElement(IconButton, {\n    \"aria-label\": \"settings\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, React.createElement(ExpandMoreIcon, {\n    fontSize: \"large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  })))))), React.createElement(Collapse, {\n    in: expanded,\n    timeout: \"auto\",\n    unmountOnExit: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    className: classes.messageWrap,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    className: classes.messageContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, React.createElement(BookingMessages, {\n    booking: booking,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  })))), React.createElement(Grid, {\n    container: true,\n    className: classes.middleBody,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, React.createElement(ListTopHalf, {\n    event: booking.event,\n    transparent: true,\n    context: context,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  })), React.createElement(EventButtons, {\n    event: booking.event,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  })));\n}\nconst useStyles = makeStyles(theme => ({\n  mainItem: {// borderRadius: 15,\n    // borderBottom: \"3px solid white\" //#707070\n    // margin: 10,\n    // padding: 10\n  },\n  mainSolidLine: {\n    marginTop: 10,\n    marginBottom: 20\n  },\n  leftMiddleItem: {},\n  middleBody: {},\n  mainHeader: {\n    fontSize: 16,\n    marginLeft: 20,\n    marginRight: 20\n  },\n  countdown: {\n    marginTop: 10,\n    fontWeight: 400,\n    color: \"grey\",\n    marginLeft: 20\n  },\n  badge: {\n    padding: '0 important'\n  },\n  dotBadge: {\n    height: 15,\n    width: 15\n  },\n  userAvatar: {\n    backgroundColor: red[500],\n    height: 80,\n    width: 80\n  },\n  partyOnGrid: {\n    marginTop: 10\n  },\n  textField: {},\n  textFieldCont: {\n    margin: 10\n  },\n  messageWrap: {\n    padding: 10\n  },\n  messageContainer: {\n    backgroundColor: \"rgba(0,0,0,0.38)\",\n    borderRadius: 10\n  },\n  mainAvatar: {\n    height: 80,\n    width: 80\n  },\n  thisLine: {\n    height: \"1px\",\n    width: \"100%\",\n    marginTop: \"2px\",\n    backgroundColor: \"#707070\"\n  }\n}));","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/Charlie2.0/client/src/Atoms/Profile/PendingBookingCard.js"],"names":["React","useState","useEffect","useContext","makeStyles","Grid","Avatar","IconButton","ExpandMoreIcon","DoneIcon","CloseIcon","Badge","Collapse","Typography","red","countdown","useMutation","gql","useXsSize","UserContext","PROFILE_DATA","SEEN_BOOKING","PartyOn","BookingMessages","ListTopHalf","EventButtons","PendingBokingCard","booking","classes","useStyles","xs_size_memo","md_size_memo","context","setContext","expanded","setExpanded","markBookingSeen","seenStates","console","log","event","name","handleExpandClick","seenUserHandle","variables","booking_id","_id","user","refetchQueries","query","host_id","color","seenUser","badgeContent","decided","confirmed","mainItem","width","backgroundColor","borderBottom","mainSolidLine","mainHeader","Date","createdAt","toString","partyOnGrid","happeningNow","badge","imagesArr","thumbnail","mainAvatar","transition","transform","messageWrap","messageContainer","middleBody","theme","marginTop","marginBottom","leftMiddleItem","fontSize","marginLeft","marginRight","fontWeight","padding","dotBadge","height","userAvatar","textField","textFieldCont","margin","borderRadius","thisLine"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Badge from '@material-ui/core/Badge';\n\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { red } from \"@material-ui/core/colors\";\n\nimport countdown from \"countdown\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\n\nimport { useXsSize } from \"../../Hooks/useXsSize\";\nimport { UserContext } from \"../../userContext\";\nimport { PROFILE_DATA } from \"src/Services/GQL/PROFILE_DATA\";\nimport { SEEN_BOOKING } from \"src/Services/GQL/SEEN_BOOKING\";\n\nimport PartyOn from \"src/Atoms/PartyOn\";\nimport BookingMessages from \"src/Atoms/BookingMessages\";\nimport ListTopHalf from \"src/Atoms/Play/ListTopHalf\";\nimport EventButtons from \"src/Molecules/event/EventButtons\";\n\n\nexport default function PendingBokingCard({ booking }) {\n  const classes = useStyles();\n  const { xs_size_memo, md_size_memo } = useXsSize();\n  const { context, setContext } = useContext(UserContext);\n  const [expanded, setExpanded] = useState(false);\n  const [markBookingSeen, seenStates] = useMutation(SEEN_BOOKING);\n\n  console.log(\"Rerender PendingBokingCard: \", booking.event.name)\n\nuseEffect(() => {\n  // if(context.expanded_id === booking._id){\n  //   setExpanded(true)\n  // }else{\n  //   setExpanded(false)\n  // }\n}, [])\n\n\n  const handleExpandClick = () => {\n\n    if(expanded){\n      setExpanded(false)\n      // setContext(prev => {\n      //   return { ...prev, \n      //     expanded_id: null\n      //   };\n      //   })\n    } else{\n        setExpanded(true)\n      //   setContext(prev => {\n      //     return { ...prev, \n      //       expanded_id: booking._id\n      //     };\n      // })\n    }\n    // seenUserHandle()\n  };\n\n  const seenUserHandle = () => {\n    markBookingSeen({\n      variables: {\n        booking_id: booking._id,\n        user: true,\n      },\n      refetchQueries: () => [\n        {\n          query: PROFILE_DATA,\n          variables: { host_id: context._id }\n        }\n      ]\n    });\n  };\n\n  let color = \"transparent\"\n  if(expanded){\n    if(md_size_memo){\n      color = \"rgba(0,0,0,0.1)\"\n    } else {\n      color = \"white\" //\"rgba(0,0,0,0.05)\"\n    }\n  }else{\n    if(md_size_memo){\n      if(booking.seenUser === false){\n        color = \"rgba(0,0,0,0.1)\"\n      }\n    }else{\n          if(booking.seenUser === false){\n      color = \"white\"\n    }\n    }\n  }\n\nlet badgeContent \nif(booking.decided){\n    if(booking.confirmed){\n      badgeContent =  <DoneIcon fontSize=\"small\" />\n    } else {\n      badgeContent =  <CloseIcon fontSize=\"small\" /> //\"rgba(0,0,0,0.05)\"\n    }\n  } else {\n    badgeContent = null //<FiberManualRecordIcon fontSize=\"small\" className={classes.dotBadge} /> \n  }\n\n  return (\n    <Grid\n      item\n      className={classes.mainItem}\n      style={{\n        // boxShadow: expanded ? \"4px 3px 5px 0px rgba(0,0,0,0.5)\" : \"none\",\n        color: md_size_memo ? \"white\" : \"black\",\n        width: xs_size_memo ? \"100%\" : \"85%\",\n        backgroundColor: color, //expanded ? color : \"transparent\",\n        borderBottom: xs_size_memo ? \"1px solid white\" : \"2px solid lightGrey\"\n      }}\n    >\n      <Grid\n        container\n        onClick={handleExpandClick}\n        alignItems=\"center\"\n        className={classes.mainSolidLine}\n      >\n        <Grid item xs={xs_size_memo ? 9 : 8}>\n          <Typography\n            variant=\"body2\"\n            align=\"left\"\n            className={classes.mainHeader}\n          >\n            <b>Your</b> request to join{\" \"}\n            <b>{booking.event.name}</b> is {!booking.decided ? \"PENDING\" : booking.confirmed ? \"CONFIRMED\" : \"DECLINED\"}\n          </Typography>\n          <Grid container >\n            <Grid item xs={6}>\n              <Typography\n                variant=\"body2\"\n                align=\"left\"\n                className={classes.countdown}\n              >\n                created <b>{countdown(\n                  new Date(booking.createdAt),\n                  new Date(),\n                  \"X\",\n                  1\n                ).toString()}{\" \"}\n                ago</b>\n              </Typography>\n            </Grid>\n            <Grid item xs={6} className={classes.partyOnGrid}>\n              {booking.event.happeningNow && <PartyOn />}\n            </Grid>\n          </Grid>\n        </Grid>\n        \n        <Grid item xs={xs_size_memo ? 3 : 2}>\n          <Grid container justify=\"center\">\n            <Grid item>\n              <IconButton aria-label=\"settings\">\n                <Badge badgeContent={badgeContent} \n                        className={classes.badge} \n                        color={booking.decided ? \"primary\" : \"secondary\"}\n                        // style={{ backgroundColor: booking.decided ? \"grey\" : \"red\"}}\n                        >\n                  <img\n                    src={booking.event.imagesArr[0].thumbnail}\n                    className={classes.mainAvatar}\n                  />\n                </Badge>\n              </IconButton>\n            </Grid>\n\n          </Grid>\n        </Grid>\n        {!xs_size_memo && (\n          <Grid item xs={2}>\n            <Grid container justify=\"center\">\n              <Grid\n                item\n                style={{\n                  transition: \"transform .1s ease-in-out\",\n                  transform: expanded ? \"rotate(-180deg)\" : \"rotate(0deg)\"\n                }}\n              >\n                <IconButton aria-label=\"settings\">\n                  <ExpandMoreIcon fontSize=\"large\" />\n                </IconButton>\n              </Grid>\n            </Grid>\n          </Grid>\n        )}\n      </Grid>\n      <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n          <Grid container justify=\"center\" className={classes.messageWrap}>\n            <Grid item>\n              <Grid container className={classes.messageContainer}>\n                <BookingMessages booking={booking} />\n              </Grid>\n            </Grid>\n          </Grid>\n        <Grid container className={classes.middleBody}>\n          <ListTopHalf event={booking.event} transparent={true} context={context}/>\n        </Grid>\n        <EventButtons event={booking.event} />\n      </Collapse>\n    </Grid>\n  );\n}\n\nconst useStyles = makeStyles(theme => ({\n  mainItem: {\n    // borderRadius: 15,\n    // borderBottom: \"3px solid white\" //#707070\n    // margin: 10,\n    // padding: 10\n  },\n  mainSolidLine: {\n    marginTop: 10,\n    marginBottom: 20\n  },\n  leftMiddleItem: {},\n  middleBody: {},\n  mainHeader: {\n    fontSize: 16,\n    marginLeft: 20,\n    marginRight: 20\n  },\n  countdown: {\n    marginTop: 10,\n    fontWeight: 400,\n    color: \"grey\",\n    marginLeft: 20\n  },\n  badge: {\n    padding: '0 important'\n  },\n  dotBadge: {\n    height: 15,\n    width: 15\n  },\n  userAvatar: {\n    backgroundColor: red[500],\n    height: 80,\n    width: 80\n  },\n  partyOnGrid: {\n    marginTop: 10\n  },\n  textField: {},\n  textFieldCont: {\n    margin: 10\n  },\n  messageWrap: {\n    padding: 10\n  },\n  messageContainer: {\n    backgroundColor: \"rgba(0,0,0,0.38)\",\n    borderRadius: 10\n  },\n  mainAvatar: {\n    height: 80,\n    width: 80\n  },\n  thisLine: {\n    height: \"1px\",\n    width: \"100%\",\n    marginTop: \"2px\",\n    backgroundColor: \"#707070\"\n  }\n}));\n"]},"metadata":{},"sourceType":"module"}